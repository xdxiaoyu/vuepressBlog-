<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>JavaScript | 小羽</title>
    <meta name="generator" content="VuePress 1.5.2">
    <link rel="icon" href="/xiaoyu_blog/favicon.ico">
    <script language="javascript" type="text/javascript" src="/xiaoyu_blog/js/mouseClick.js"></script>
    <meta name="description" content="婷婷袅袅十三余，豆蔻梢头二月初">
    <link rel="preload" href="/xiaoyu_blog/assets/css/0.styles.377b39b4.css" as="style"><link rel="preload" href="/xiaoyu_blog/assets/js/app.04d90341.js" as="script"><link rel="preload" href="/xiaoyu_blog/assets/js/2.0c3dc4c5.js" as="script"><link rel="preload" href="/xiaoyu_blog/assets/js/8.b30e1d81.js" as="script"><link rel="prefetch" href="/xiaoyu_blog/assets/js/10.8a904c81.js"><link rel="prefetch" href="/xiaoyu_blog/assets/js/11.1b94ee20.js"><link rel="prefetch" href="/xiaoyu_blog/assets/js/12.f1f7a0e5.js"><link rel="prefetch" href="/xiaoyu_blog/assets/js/13.38f235f8.js"><link rel="prefetch" href="/xiaoyu_blog/assets/js/14.4e98b21f.js"><link rel="prefetch" href="/xiaoyu_blog/assets/js/15.9309f0f7.js"><link rel="prefetch" href="/xiaoyu_blog/assets/js/16.f6915983.js"><link rel="prefetch" href="/xiaoyu_blog/assets/js/17.1ea56815.js"><link rel="prefetch" href="/xiaoyu_blog/assets/js/18.14b86352.js"><link rel="prefetch" href="/xiaoyu_blog/assets/js/3.22c99b79.js"><link rel="prefetch" href="/xiaoyu_blog/assets/js/4.6e0b2219.js"><link rel="prefetch" href="/xiaoyu_blog/assets/js/5.7117a645.js"><link rel="prefetch" href="/xiaoyu_blog/assets/js/6.b5999823.js"><link rel="prefetch" href="/xiaoyu_blog/assets/js/7.aaef4281.js"><link rel="prefetch" href="/xiaoyu_blog/assets/js/9.8eeddebf.js">
    <link rel="stylesheet" href="/xiaoyu_blog/assets/css/0.styles.377b39b4.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/xiaoyu_blog/" class="home-link router-link-active"><!----> <span class="site-name">小羽</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/xiaoyu_blog/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language" class="dropdown-title"><span class="title">Language</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/xiaoyu_blog/Language/Node/Node/" class="nav-link">
  Node
</a></li><li class="dropdown-item"><!----> <a href="/xiaoyu_blog/Language/JavaScript/JavaScript/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  JavaScript
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Tool" class="dropdown-title"><span class="title">Tool</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/xiaoyu_blog/Tool/Vue/Vue_mvvm/" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/xiaoyu_blog/Tool/Axios/" class="nav-link">
  Axios
</a></li><li class="dropdown-item"><!----> <a href="/xiaoyu_blog/Tool/SSO/" class="nav-link">
  SSO
</a></li><li class="dropdown-item"><!----> <a href="/xiaoyu_blog/Tool/Git/" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/xiaoyu_blog/Tool/Webpack/" class="nav-link">
  Webpack
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label=" Contact" class="dropdown-title"><span class="title"> Contact</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/dingxingxing" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.cnblogs.com/dingxingxing" target="_blank" rel="noopener noreferrer" class="nav-link external">
  博客园
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/xiaoyu_blog/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language" class="dropdown-title"><span class="title">Language</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/xiaoyu_blog/Language/Node/Node/" class="nav-link">
  Node
</a></li><li class="dropdown-item"><!----> <a href="/xiaoyu_blog/Language/JavaScript/JavaScript/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  JavaScript
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Tool" class="dropdown-title"><span class="title">Tool</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/xiaoyu_blog/Tool/Vue/Vue_mvvm/" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/xiaoyu_blog/Tool/Axios/" class="nav-link">
  Axios
</a></li><li class="dropdown-item"><!----> <a href="/xiaoyu_blog/Tool/SSO/" class="nav-link">
  SSO
</a></li><li class="dropdown-item"><!----> <a href="/xiaoyu_blog/Tool/Git/" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/xiaoyu_blog/Tool/Webpack/" class="nav-link">
  Webpack
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label=" Contact" class="dropdown-title"><span class="title"> Contact</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/dingxingxing" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.cnblogs.com/dingxingxing" target="_blank" rel="noopener noreferrer" class="nav-link external">
  博客园
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Language </span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Node</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>JavaScript</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/xiaoyu_blog/Language/JavaScript/JavaScript/" aria-current="page" class="active sidebar-link">JavaScript</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/xiaoyu_blog/Language/JavaScript/JavaScript/#一-什么是javascript" class="sidebar-link">一.什么是JavaScript</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/xiaoyu_blog/Language/JavaScript/JavaScript/#_1、javascript历史" class="sidebar-link">1、JavaScript历史</a></li><li class="sidebar-sub-header"><a href="/xiaoyu_blog/Language/JavaScript/JavaScript/#_2、javascript实现" class="sidebar-link">2、JavaScript实现</a></li><li class="sidebar-sub-header"><a href="/xiaoyu_blog/Language/JavaScript/JavaScript/#_3、javascript的不同版本" class="sidebar-link">3、JavaScript的不同版本</a></li><li class="sidebar-sub-header"><a href="/xiaoyu_blog/Language/JavaScript/JavaScript/#_4、小结" class="sidebar-link">4、小结</a></li></ul></li><li class="sidebar-sub-header"><a href="/xiaoyu_blog/Language/JavaScript/JavaScript/#二、html中的javascript" class="sidebar-link">二、HTML中的JavaScript</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/xiaoyu_blog/Language/JavaScript/JavaScript/#_1、-script-元素" class="sidebar-link">1、&lt;script&gt;元素</a></li><li class="sidebar-sub-header"><a href="/xiaoyu_blog/Language/JavaScript/JavaScript/#_2、行内代码与外部文件" class="sidebar-link">2、行内代码与外部文件</a></li><li class="sidebar-sub-header"><a href="/xiaoyu_blog/Language/JavaScript/JavaScript/#_3、文档模式" class="sidebar-link">3、文档模式</a></li><li class="sidebar-sub-header"><a href="/xiaoyu_blog/Language/JavaScript/JavaScript/#_4、-noscrip元素" class="sidebar-link">4、 noscrip元素</a></li><li class="sidebar-sub-header"><a href="/xiaoyu_blog/Language/JavaScript/JavaScript/#_5-、小结" class="sidebar-link">5 、小结</a></li></ul></li><li class="sidebar-sub-header"><a href="/xiaoyu_blog/Language/JavaScript/JavaScript/#三、语言基础" class="sidebar-link">三、语言基础</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/xiaoyu_blog/Language/JavaScript/JavaScript/#_1、语法" class="sidebar-link">1、语法</a></li><li class="sidebar-sub-header"><a href="/xiaoyu_blog/Language/JavaScript/JavaScript/#_2、关键字与保留字" class="sidebar-link">2、关键字与保留字</a></li><li class="sidebar-sub-header"><a href="/xiaoyu_blog/Language/JavaScript/JavaScript/#_3、变量" class="sidebar-link">3、变量</a></li><li class="sidebar-sub-header"><a href="/xiaoyu_blog/Language/JavaScript/JavaScript/#_4、数据类型" class="sidebar-link">4、数据类型</a></li><li class="sidebar-sub-header"><a href="/xiaoyu_blog/Language/JavaScript/JavaScript/#_5、操作符" class="sidebar-link">5、操作符</a></li><li class="sidebar-sub-header"><a href="/xiaoyu_blog/Language/JavaScript/JavaScript/#_6、语句" class="sidebar-link">6、语句</a></li><li class="sidebar-sub-header"><a href="/xiaoyu_blog/Language/JavaScript/JavaScript/#_7、函数" class="sidebar-link">7、函数</a></li><li class="sidebar-sub-header"><a href="/xiaoyu_blog/Language/JavaScript/JavaScript/#_8、小结" class="sidebar-link">8、小结</a></li></ul></li><li class="sidebar-sub-header"><a href="/xiaoyu_blog/Language/JavaScript/JavaScript/#四、变量、作用域与内存" class="sidebar-link">四、变量、作用域与内存</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/xiaoyu_blog/Language/JavaScript/JavaScript/#_1、原始值与引用值" class="sidebar-link">1、原始值与引用值</a></li><li class="sidebar-sub-header"><a href="/xiaoyu_blog/Language/JavaScript/JavaScript/#_2、执行上下文与作用域" class="sidebar-link">2、执行上下文与作用域</a></li><li class="sidebar-sub-header"><a href="/xiaoyu_blog/Language/JavaScript/JavaScript/#_3、垃圾回收" class="sidebar-link">3、垃圾回收</a></li><li class="sidebar-sub-header"><a href="/xiaoyu_blog/Language/JavaScript/JavaScript/#_4、小结-2" class="sidebar-link">4、小结</a></li></ul></li><li class="sidebar-sub-header"><a href="/xiaoyu_blog/Language/JavaScript/JavaScript/#五、基本引用类型" class="sidebar-link">五、基本引用类型</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/xiaoyu_blog/Language/JavaScript/JavaScript/#_1、date" class="sidebar-link">1、Date</a></li></ul></li></ul></li><li><a href="/xiaoyu_blog/Language/JavaScript/ES6/" class="sidebar-link">ES6</a></li><li><a href="/xiaoyu_blog/Language/JavaScript/ES7-10/" class="sidebar-link">ES7-10</a></li></ul></section></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Tool </span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="javascript"><a href="#javascript" class="header-anchor">#</a> JavaScript</h1> <h2 id="一-什么是javascript"><a href="#一-什么是javascript" class="header-anchor">#</a> 一.什么是JavaScript</h2> <h3 id="_1、javascript历史"><a href="#_1、javascript历史" class="header-anchor">#</a> 1、JavaScript历史</h3> <p>​	1995年，JavaScript诞生于网景公司一位Brenda Eich的工程师手上</p> <p>​	1998年，ISO和IEC将ECMAScript采纳为标准（ISO/IEC-16262）。自此以后，各家浏览器均已ECMAScript作为自己JavaScripe实现的依据，虽然具体实现各有不同。</p> <h3 id="_2、javascript实现"><a href="#_2、javascript实现" class="header-anchor">#</a> 2、JavaScript实现</h3> <p>​	虽然JavaScript和ECMAScript基本上是同义词，但是JavaScript远远不限于ECMA-262所定义的那样。完整的JavaScript实现包含以下几个部分：</p> <ul><li>核心（ECMAScript）</li> <li>文档对象模型（DOM）</li> <li>浏览器对象（BOM）</li></ul> <h4 id="_2-1、ecmascript"><a href="#_2-1、ecmascript" class="header-anchor">#</a> 2.1、ECMAScript</h4> <p>​	ECMAScript，即ECMA-262定义的语言，并不局限于Web浏览器。事实上，这门语言没有输入和输出之类的方法。ECMA-262将这门语言作为一个基准来定义，以便在它之上再构建更稳健的脚本语言。Web浏览器只是ECMAScript实现可能存在的一种<strong>宿主环境</strong>。宿主环境提供ECMAScript的基准实现和与环境自身交互必须的扩展。扩展（比如DOM）使用ECMAScript核心类型和语法，提供特定于环境的 额外功能。其他宿主环境还有服务端JavaScript平台Node.js和即将被淘汰的Adobe Flash。</p> <blockquote><p>如果不涉及浏览器的话，ECMA-262到底定义了什么？在基本的层面，它描述这门语言的如下部分：</p> <ul><li>语法</li> <li>类型</li> <li>语句</li> <li>关键字</li> <li>保留字</li> <li>操作符</li> <li>全局对象</li></ul></blockquote> <p>​	ECMAScript只是对实现这个规范描述的所有方面的一门语言的称呼。JavaScript实现ECMAScript，而Adobe ActionScript同样也实现了ECMAScript。</p> <blockquote><p>ECMA-262第6版本，俗称ES6、ES2015，发布于2015年6月。这一版包含了大概这个规范有史以来最重要的一批增强特性。</p> <p>.....</p> <p>ECMA-262第10版本，也称ES10、ES2019，发布于2019年6月。修订内容大家可网上自行查阅。</p> <p>ECMA-262第11版本，也称ES11、ES2020，发布于2020年6月。修订内容大家可网上自行查阅。</p></blockquote> <h4 id="_2-2、dom"><a href="#_2-2、dom" class="header-anchor">#</a> 2.2、DOM</h4> <p>​	<strong>文档对象模型</strong>（DOM）是一个应用编程接口(API)，用于在HTML中使用扩展的XML。DOM将整个页面抽象为一组分层节点。HTML或XML页面的每个组成部分都是一种节点，包含不同数据。</p> <blockquote><p>DOM通过创建表示文档的树，让开发者可以随性所欲地控制网页的内容和结构。使用DOM API，可以轻松删除、添加、替换、修改节点。</p></blockquote> <p>①、为什么DOM是必需的</p> <p>​	浏览器支持不同形态的动态HTML（DHTML）的情况下，开发者首先可以做到不刷新页面而修改页面外观和内容。这代表web技术的一个巨大进步，但也暴露了很大的问题。由于网景和微软采用不同思路开发DHTML，开发者写一个HTML页面就可以在任何浏览器中运行的好日子就此终结。</p> <p>​	为了保持Web跨平台的本性，万维网联盟（W3C）开始制定DOM标准进程</p> <h4 id="_2-3、bom"><a href="#_2-3、bom" class="header-anchor">#</a> 2.3、BOM</h4> <p>​	浏览器提供了<strong>浏览器对象模型</strong>（BOM）API，用于支持访问和操作浏览器的窗口。使用DOM，开发者可以操控浏览器显示页面之外的部分。而BOM真正独一无二的地方，当然也是问题最多的地方，就是它是唯一一个没有相关标准的JavaScript实现。</p> <p>​	HTML5改变了这个局面，这个版本的HTML以正式规范的形式涵盖了尽可能多的BOM特性问题。</p> <h3 id="_3、javascript的不同版本"><a href="#_3、javascript的不同版本" class="header-anchor">#</a> 3、JavaScript的不同版本</h3> <blockquote><p>多数浏览器对JavaScript的支持指的是实现ECMAScript和DOM的程度。</p></blockquote> <h3 id="_4、小结"><a href="#_4、小结" class="header-anchor">#</a> 4、小结</h3> <div class="language-js extra-class"><pre class="language-js"><code>JavaScript是一门用来与网页交互的脚本语言。
包含以下三个组成部分：

<span class="token operator">-</span> ECMAScript：由<span class="token constant">ECMA</span><span class="token operator">-</span><span class="token number">262</span>定义并提供核心功能。
<span class="token operator">-</span> 文档对象模型（<span class="token constant">DOM</span>）：提供与网页内容交互的方法和接口。
<span class="token operator">-</span> 浏览器对象模型（<span class="token constant">BOM</span>）：提供与浏览器交互的方法和接口。
</code></pre></div><blockquote><p>JavaScript的这三个部分得到了五大浏览器（IE、FireFox、Chrome、Safari、Open）不同程度的支持。所有浏览器基本都对ES5（ECMAScript5）提供了完善的支持，而对ES6和ES7的支持度也在不断提升。浏览器对DOM的支持各部相同，但对Level3的支持日益趋于规范。HTML5中收录的BOM会因浏览器而异，不过开发者仍然可以假定存在很大一部分公共特性。</p></blockquote> <h2 id="二、html中的javascript"><a href="#二、html中的javascript" class="header-anchor">#</a> 二、HTML中的JavaScript</h2> <h3 id="_1、-script-元素"><a href="#_1、-script-元素" class="header-anchor">#</a> 1、<code>&lt;script&gt;</code>元素</h3> <p><code>&lt;script&gt;</code>元素有下列8个属性：</p> <ul><li><code>async</code>：可选。表示应该立即开始下载脚本，但不能阻止 其他页面动作，比如下载资源或者等待其他脚本加载。只对外部脚本文件有效。</li> <li><code>charset</code>：可选。使用<code>src</code>属性指定的代码字符集。这个属性很少使用，因为大多数浏览器不在乎它的值。</li> <li><code>crossorigin</code>：可选。配置相关请求的CORS（跨域资源共享）设置。默认不使用CORS。<code>crossorigin=&quot;anonymous&quot;</code>配置文件请求不必设置凭据标志。<code>crossorigin=&quot;use-credentials&quot;</code>设置凭据标志，意味着出站请求会包含凭据。</li> <li><code>defer</code>：可选。表示在文档解析和显示完成后再执行脚本是没有问题的。只对外部脚本文件有效。在IE7及更早的版本中，对行内脚本也可以指定这个属性。</li> <li><code>integrity</code>：可选。允许比对接收到的资源和指定的加密签名以验证子资源完整性（SRI，Subresource Intergrity）。如果接收到的资源的签名与这个属性指定的签名不匹配，则页面会报错，脚本不会执行。这个属性可以用于确保内容分发网络（CDN）不会提供恶意内容。</li> <li><code>src</code>：可选。表示包含要执行的代码的外部文件。</li> <li><code>type</code>：可选。代替<code>language</code>，表示代码块中脚本语言的内容类型</li></ul> <p><code>&lt;script&gt;</code>的使用方式有两种：</p> <ol><li><p>通过它直接在网页中嵌入JavaScript代码。</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">function</span> <span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Hi !&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

包含在<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">内的代码会被从上到下解释。上述例子，被解释的是一个函数定义，并且该函数会被保存在解释器环境中。在 </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span> 元素中的代码被计算完成之前，页面的其余内容不会被加载，也不会被显示。
</code></pre></div></li> <li><p>通过它在网页中包含外部JavaScript文件。</p> <blockquote><p>要包含外部文件中的JavaScript，就必须使用<code>src</code>这个属性。这个属性的值是一个URL，指向包含JavaScript代码的文件。</p></blockquote></li></ol> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>example.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

上述例子在页面中加载了一个名为example.js的外部文件。文件本身只需要包含要放在<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span>的起始及结束标签中的JavaScript代码。于解释行内JavaScript一样，在解释外部JavaScript文件时，页面也会阻塞。（阻塞时间也包含下载文件的时间。）在XHTML文档中，可以忽略结束标签，比如：

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>example.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>以上语法不能在HTML文件中使用，因为它是无效的HTML，有些浏览器不能正常，比如IE。</p> <blockquote><p><strong>注意</strong>    按照惯例，外部JavaScript文件的扩展名是js。这不是必需的，因为浏览器不会检查所包含的JavaScript文件的扩展名。这就为使用服务器端脚本语言（如TypeScript，或React的JSX）转译为JavaScript提供了可能性。不过要注意，服务器经常会根据文件扩展来确定响应的正确MIME类型。如果不打算使用.js扩展名，一定要确保服务器能返回正确的MIME类型。</p> <p>MIME类型：是设定某种<a href="https://baike.baidu.com/item/%E6%89%A9%E5%B1%95%E5%90%8D/103577" target="_blank" rel="noopener noreferrer">扩展名<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>的<a href="https://baike.baidu.com/item/%E6%96%87%E4%BB%B6/6270998" target="_blank" rel="noopener noreferrer">文件<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>用一种<a href="https://baike.baidu.com/item/%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F/5985445" target="_blank" rel="noopener noreferrer">应用程序<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>来打开的方式类型，当该扩展名文件被访问的时候，<a href="https://baike.baidu.com/item/%E6%B5%8F%E8%A7%88%E5%99%A8/213911" target="_blank" rel="noopener noreferrer">浏览器<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>会自动使用指定应用程序来打开。多用于指定一些客户端自定义的文件名，以及一些媒体文件打开方式。</p></blockquote> <h4 id="_1-1-标签占位符"><a href="#_1-1-标签占位符" class="header-anchor">#</a> 1.1 标签占位符</h4> <p>​	过去，所有的<code>&lt;script&gt;</code>元素都被放在页面的<code>&lt;head&gt;</code>标签内。对于很多需要JavaScript的页面，这会导致页面渲染的明显延迟，此期间浏览器窗口完全空白。为解决这个问题，现代Web应用程序通常将所有JavaScript引用放在<code>&lt;body&gt;</code>元素中的页面内容后面。</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype">&lt;!DOCTYPE html&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>example.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>  <span class="token comment">&lt;!-- 之前的写法 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- 这是页面内容 --&gt;</span>
        
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>example.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>  <span class="token comment">&lt;!-- 现在的写法 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><h4 id="_1-2-推迟执行脚本"><a href="#_1-2-推迟执行脚本" class="header-anchor">#</a> 1.2 推迟执行脚本</h4> <div class="language- extra-class"><pre><code>HTML 4.01为`&lt;script&gt;`元素定义了一个叫`defer`属性。这个属性表示脚本在执行的时候不会改变页面的结构。因此这个脚本完全可以在整个页面解析完之后再运行。在`&lt;script&gt;`元素上设置`defer`属性，会告诉浏览器应该立即开始下载，但执行应该推迟：
</code></pre></div><div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype">&lt;!DOCTYPE html&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- 这是页面内容 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">defer</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>example.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>

注意  对于XHTML文档，指定defer属性时应该写成defer=&quot;defer&quot;。
</code></pre></div><h4 id="_1-3-异步执行脚本"><a href="#_1-3-异步执行脚本" class="header-anchor">#</a> 1.3 异步执行脚本</h4> <p>​	HTML5位<code>&lt;script&gt;</code>元素定义了<code>async</code>属性。从改变脚本处理方式上看，<code>async</code>属性与<code>defer</code>类似。当然，它们两者也都只适用于外部脚本，都会告诉浏览器立即开始下载。不过，与<code>defer</code>不同的是，标记<code>async</code>的脚本并不保证它们出现的次序执行</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype">&lt;!DOCTYPE html&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- 这是页面内容 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">async</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>example.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">async</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>example2.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!--
	在这个例子中，第二个脚本可能先于第一个脚本执行。因此，重点在于它们之间没有依赖关系。给脚本添加async属性的目的是告诉浏览器，不必等脚本下载和执行完后再加载页面，同样也不必等到该异步脚本下载和执行后再加载其他脚本。正因为如此，脚步脚步不应该在加载期间修改DOM。
--&gt;</span>

注意  对于XHTML文档，指定async属性时应该写成async=&quot;async&quot;。
</code></pre></div><h4 id="_1-4-动态加载脚本"><a href="#_1-4-动态加载脚本" class="header-anchor">#</a> 1.4  动态加载脚本</h4> <p>​	除了<code>&lt;script&gt;</code>标签，还有其他方式可有加载脚本。因为JavaScript可以使用DOM API， 所以通过向DOM中动态添加<code>&lt;script&gt;</code>元素同样可以加载指定脚本。只要创建一个<code>&lt;script&gt;</code>元素并将其添加到DOM即可。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> script <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'script'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
script<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token string">'gibberish.js'</span><span class="token punctuation">;</span>
document<span class="token punctuation">.</span>head<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>script<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 当然，在把HTMLElement元素添加到DOM且执行到这段代码之前不会发送请求。默认情况下，以这种方式创建的&lt;script&gt;元素是以异步方式加载的，相当于添加了async属性。不过这种做可能会有问题，因为所有浏览器都支持createElement()方法，但不是所有浏览器都支持async属性。因此，如果要统一动态脚本的加载行为，可以明确将其设置为同步加载：</span>

<span class="token keyword">let</span> script <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'script'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
script<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token string">'gibberish.js'</span><span class="token punctuation">;</span>
script<span class="token punctuation">.</span>async <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
document<span class="token punctuation">.</span>head<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>script<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 以这种方式获取的资源对浏览器预加载器是不可见的。这会严重影响它们在资源获取队列中的优先级。根据应用程序的工作方式以及怎么使用，这种方式可能会严重影响性能。要想让预加载器知道这些动态请求文件的存在，可以在文档头部显式声明它们：</span>

<span class="token operator">&lt;</span>link rel<span class="token operator">=</span><span class="token string">&quot;preload&quot;</span> href<span class="token operator">=</span><span class="token string">&quot;gibberish.js&quot;</span><span class="token operator">&gt;</span>
</code></pre></div><h4 id="_1-5-xhtml中-的变化"><a href="#_1-5-xhtml中-的变化" class="header-anchor">#</a> 1.5 XHTML中 的变化</h4> <p>​	可扩展超文本标记语言是将HTML作为XML的应用重新包装的结果。与XHTML不同，在XHTML中使用JavaScript必须指定<code>type</code>属性且值为<code>text/javascript</code>。解析 <code>a &lt; b</code>语句中的小于号（<code>&lt;</code>）会被解析成一个标签的开始，并且由于作为标签开始的小于号后面不能有空格，这样会导致语法错误。避免XHTML中这种语法错误的方式有两种。</p> <blockquote><p>第一种是把所有小于号（<code>&lt;</code>）都替换成对应的HTML实体形式（<code>&amp;lt;</code>）</p></blockquote> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">function</span> <span class="token function">compare</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span>b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">&amp;</span>lt<span class="token punctuation">;</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;A&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">&gt;</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;B&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;AB&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><blockquote><p>第二种是把所有代码都包含到一个CDATA块中。在XHTML（及XML）中，CDATA快表示文档中可以包含任意文本的区块，其内容不作为标签来解析，因此可以在其中包含任意字符，包括小于号，且不会引发语法错误。使用CDATA格式如下：</p></blockquote> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript"> </span><span class="token included-cdata"><span class="token cdata">&lt;![CDATA[</span><span class="token language-javascript">
    <span class="token keyword">function</span> <span class="token function">compare</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span>b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">&amp;</span>lt<span class="token punctuation">;</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;A&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">&gt;</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;B&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;AB&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</span><span class="token cdata">]]&gt;</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

在兼容XHTML的浏览器中，这样能解决问题。但在不支持CDATA块的非XHTML兼容浏览器中则不行。为此，CDATA标记必须使用JavaScript注释来抵消。

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token comment">//</span></span><span class="token included-cdata"><span class="token cdata">&lt;![CDATA[</span><span class="token language-javascript">
    <span class="token keyword">function</span> <span class="token function">compare</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span>b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">&amp;</span>lt<span class="token punctuation">;</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;A&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">&gt;</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;B&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;AB&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token comment">//</span></span><span class="token cdata">]]&gt;</span></span><span class="token language-javascript">
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

这种格式适用于所有现代浏览器。虽然有点黑科技的味道，但它可以通过XHTML验证，而且对XHTML之前的浏览器也能优雅地降级
</code></pre></div><h3 id="_2、行内代码与外部文件"><a href="#_2、行内代码与外部文件" class="header-anchor">#</a> 2、行内代码与外部文件</h3> <p>​		虽然可以直接在HTML文件中嵌入JavaScript代码，但通常认为最佳实践是尽可能将JavaScript代码放在外部文件中。不过这个最佳实践并不是明确的强制性规则。推荐使用外部文件的理由如下。</p> <ul><li><strong>可维护性</strong>。 JavaScript代码如果分散到很多HTML页面，会导致维护困难。而一个目录保存所有JavaScript文件，则更容易维护，这样开发者就可以独立于使用它们的HTML页面来编辑代码。</li> <li><strong>缓存</strong>。 浏览器会根据特定的设置缓存所有外部链接的JavaScript文件，这意味着如果两个页面都用到同一个文件，则该文件只需下载一次。这最终意味着页面加载更快。</li> <li><strong>适应未来</strong>。  通过把JavaScript放到外部文件中，就不必考虑用XHTML或前面提到的注释黑科技。包含外部JavaScript文件的语法在HTML和XHTML中是一样的</li></ul> <h3 id="_3、文档模式"><a href="#_3、文档模式" class="header-anchor">#</a> 3、文档模式</h3> <blockquote><p>最初文档模式有两种：<strong>混合模式</strong>和<strong>标准模式</strong>，后又出现第三种文档模式：<strong>准标准模式</strong></p></blockquote> <h3 id="_4、-noscrip元素"><a href="#_4、-noscrip元素" class="header-anchor">#</a> 4、 <code>noscrip</code>元素</h3> <p>​		针对早期浏览器不支持JavaScript的问题，需要一个页面优雅的降级的处理方案。最终，<code>&lt;noscript&gt;</code>元素出现，被用于给不支持JavaScript，但对于禁用JavaScript的浏览器来说，这个元素仍然有它的用处。</p> <blockquote><p><code>noscript</code>元素可以包含任何可以出现在<code>&lt;body&gt;</code>中的HTML元素，<code>&lt;script&gt;</code>除外。在下列两种情况下，浏览器将显示包含在<code>noscript</code>中的内容：</p> <p>--- 浏览器不支持脚本；</p> <p>--- 浏览器对脚本的支持被关闭。</p> <p>任何一个条件被满足，包含在<code>noscript</code>中的内容就会被渲染。否则，浏览器不会渲染<code>noscript</code>中的内容。</p></blockquote> <h3 id="_5-、小结"><a href="#_5-、小结" class="header-anchor">#</a> 5 、小结</h3> <ul><li>要包含外部JavaScript文件，必须将<code>src</code>属性设置为要包含文件的URL。文件可以跟网页在同一台服务器上，也可以位于完全不同的域。</li> <li>所有<code>&lt;script&gt;</code>元素会依照它们在网页中出现的次序被解释。在不使用<code>defer</code>和<code>async</code>属性的情况下，包含<code>&lt;script&gt;</code>元素中的代码必须严格按次序解释。</li> <li>对不推迟执行的脚本，浏览器必须解释完位于<code>&lt;script&gt;</code>元素中的代码，然后才能继续渲染页面的剩余部分。为此，通常应该把<code>&lt;script&gt;</code>元素放到页面末尾i，介于主内容之后及标签之前。</li> <li>可以使用<code>async</code>属性表示脚本不需要等待其他脚本，同时也不阻塞文档渲染，即异步加载。异步脚本不能保证按照它们在页面中出现的次序执行。</li> <li>通过使用<code>&lt;noscript&gt;</code>元素，可以指定在浏览器不支持脚本时显示的内容。如果浏览器支持并启用脚本，则<code>&lt;noscript&gt;</code>元素中的任何内容都不会被渲染。</li></ul> <h2 id="三、语言基础"><a href="#三、语言基础" class="header-anchor">#</a> 三、语言基础</h2> <h3 id="_1、语法"><a href="#_1、语法" class="header-anchor">#</a> 1、语法</h3> <h4 id="_1-1-区分大小写"><a href="#_1-1-区分大小写" class="header-anchor">#</a> 1.1 区分大小写</h4> <p>​	 首先要知道的是，ECMAScript中一切都区分大小写。无论是变量、函数名还是操作符，都区分大小写。换句话说，变量<code>test</code>和变量<code>Test</code>是两个不同的变量。</p> <h4 id="_1-2-标识符"><a href="#_1-2-标识符" class="header-anchor">#</a> 1.2 标识符</h4> <p>​	  <strong>标识符</strong>：就是变量、函数、属性或函数参数的名称。</p> <blockquote><p>标识符可以由一或多个下列字符组成：</p></blockquote> <ul><li><p>第一个字符必须是一个字母、下划线（<code>_</code>）或美元符号（<code>$</code>）;</p></li> <li><p>剩下的其他字符可以是字母、下划线、美元符号或数字。</p> <p>按照惯例，ECMAScript标识符使用驼峰大小写形式。例：<code>firstEscond</code></p> <p><strong>注意</strong>    关键字、保留字、<code>true</code> 、<code>false</code>和<code>null</code>不能作为标识符</p></li></ul> <h4 id="_1-3-注释"><a href="#_1-3-注释" class="header-anchor">#</a> 1.3 注释</h4> <p>ECMAScript采用C语言风格的注释，包括单行注释和块注释。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 单行注释</span>

<span class="token comment">/* 这是多行
注释*/</span>
</code></pre></div><h4 id="_1-4-严格模式"><a href="#_1-4-严格模式" class="header-anchor">#</a> 1.4  严格模式</h4> <p>​		  ECMAScript 5增加了严格模式的概念。严格模式是一种不同的JavaScript解析和执行模式，ECMAScript 3的一些不规范写法在这种模式下会被处理。对于不安全的活动将抛出错误。要对整个脚本启用严格模式，在脚本开头加上这一行：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token string">&quot;user strict&quot;</span>
</code></pre></div><p>​		   虽然看起来像没有赋值给任何变量的字符串，但它其实是一个预处理指令。任何支持的JavaScript引擎看到它都会切换到严格模式。选择这种语法形式的目的是不破坏ECMAScript 3语法。</p> <p>​		   也可以单独指定一个函数在严格模式下执行，只要把这个预处理指令放到函数体开头即可：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;use strict&quot;</span><span class="token punctuation">;</span>
    <span class="token comment">// 函数体</span>
<span class="token punctuation">}</span>

<span class="token comment">// 所有现代浏览器都支持严格模式。</span>
</code></pre></div><h4 id="_1-5-语句"><a href="#_1-5-语句" class="header-anchor">#</a> 1.5  语句</h4> <p>​		  ECMAScript中的语句以分号结尾。省略分号意味着由解析器确定语句在哪里结尾，如下所示：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> sum <span class="token operator">=</span> a <span class="token operator">+</span> b			<span class="token comment">// 没有加分号也有效，但不推荐</span>
<span class="token keyword">let</span> diff <span class="token operator">=</span> a <span class="token operator">-</span> b<span class="token punctuation">;</span>		<span class="token comment">// 加分号有效，推荐</span>

<span class="token comment">// 记着加分号有助于防止省略造成的问题，比如可以避免输入内容不完整</span>
</code></pre></div><p>​		 if之类的控制语句只在执行多条语句时要求必须有代码块。不过最佳实践是始终在控制语句中使用代码块，即使要执行的只有一条语句，如下例所示：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 有效，但容易导致错误，应该避免</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>test<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>test<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 推荐</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>test<span class="token punctuation">)</span> <span class="token punctuation">{</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>test<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 在控制语句中使用代码块可以让你内容更清晰，在需要修改代码时也可以减少出错的可能性</span>
</code></pre></div><h3 id="_2、关键字与保留字"><a href="#_2、关键字与保留字" class="header-anchor">#</a> 2、关键字与保留字</h3> <p>​		ECMA-262描述了一组保留的<strong>关键字</strong>，这些关键字有特殊用途。比如表示控制语句的开始和结束，或者执行特定的操作。按照规定，保留的关键字不能用座标识符或属性名。ECMA-262第6版规定的所有关键字如下：</p> <div class="language-js extra-class"><pre class="language-js"><code>berak		<span class="token keyword">do</span>			<span class="token keyword">in</span>			<span class="token keyword">typeof</span>		<span class="token keyword">case</span>		<span class="token keyword">else</span>		<span class="token keyword">instanceof</span>		<span class="token class-name">var</span>	
<span class="token keyword">catch</span>		<span class="token keyword">export</span>		 <span class="token keyword">new</span>		 <span class="token class-name">void</span>		 <span class="token keyword">class</span>		 <span class="token class-name">extends</span>	 <span class="token keyword">return</span>			 <span class="token keyword">while</span>
<span class="token keyword">const</span>		finally		 <span class="token keyword">super</span>		 <span class="token keyword">with</span>		<span class="token keyword">continue</span>	 <span class="token keyword">for</span>		 <span class="token keyword">switch</span>		 	 <span class="token keyword">yield</span>
<span class="token keyword">debugger</span>	<span class="token keyword">function</span>	 <span class="token keyword">this</span>		 <span class="token keyword">default</span>	<span class="token keyword">if</span>			 <span class="token keyword">throw</span>		 <span class="token keyword">delete</span>			<span class="token keyword">import</span>
<span class="token keyword">try</span>
</code></pre></div><h3 id="_3、变量"><a href="#_3、变量" class="header-anchor">#</a> 3、变量</h3> <p>​		ECMAScript变量是松散型的，意思变量是可以用于保存任何类型的数据。每个变量只不过是一个用于保存任意值的命名占位符。有3个关键字可以声明变量： <code>var</code>、<code>const</code>和<code>let</code>。其中, <code>var</code>在ECMAScript的所有版本中都可以使用，而<code>const</code>和<code>let</code> 只能在ECMAScript 6及更晚的版本中使用。</p> <h4 id="_3-1、var关键字"><a href="#_3-1、var关键字" class="header-anchor">#</a> 3.1、var关键字</h4> <p>​			①  <code>var</code> 声明作用域</p> <p>​			使用<code>var</code>操作符定义的变量会成为包含它的函数的局部变量。比如，使用<code>var</code>在一个函数内部定义一个变量，就意味着该变量将在函数退出时被销毁：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> message <span class="token operator">=</span> <span class="token string">&quot;hi&quot;</span><span class="token punctuation">;</span> <span class="token comment">// 局部变量</span>
<span class="token punctuation">}</span>
<span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 出错</span>
</code></pre></div><p>​		②  <code>var</code>声明提前</p> <p>​		使用<code>var</code>时，下面的代码不会报错。这是因为使用这个关键字声明的变量会自动提升到函数作用域顶部：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> age <span class="token operator">=</span> <span class="token number">26</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// undefined</span>

<span class="token comment">// 之所以不会报错，是因为ECMAScript运行时把它看成等价如下代码：</span>

<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> age<span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>
    age <span class="token operator">=</span> <span class="token number">26</span>
<span class="token punctuation">}</span>
<span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// undefined</span>
</code></pre></div><h4 id="_3-2-let-声明"><a href="#_3-2-let-声明" class="header-anchor">#</a> 3.2  let 声明</h4> <p>​	<code>let</code>跟<code>var</code>的作用差不多，但有着非常重要的区别。最明显的区别是，<code>let</code>声明的范围是块作用域，而<code>var</code>声明的范围是函数作用域。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">'Matt'</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">// Matt</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">// Matt</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> age <span class="token operator">=</span> <span class="token number">26</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">// 26</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">// ReferenceError: age没有定义</span>

<span class="token comment">// 在这里，age 变量之所以不能在if块外部被引用，是因为它的作用域仅限于该块的内部。块作用域是函数作用域的子集。因此适用于var的作用域限制同样也适用于let。</span>
</code></pre></div><p>​		当然，JavaScript引擎会记录用于变量声明的标识符及其所在块作用域，因此嵌套使用相同的标识符不会报错，而这是因为同一个块中没有重复声明：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">'Nicholas'</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//	'Nicholas'</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">'Matt'</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//	'Matt'</span>
<span class="token punctuation">}</span>


<span class="token keyword">let</span> age <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//	30</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> age <span class="token operator">=</span> <span class="token number">26</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//	26</span>
<span class="token punctuation">}</span>

<span class="token comment">// 对声明冗余报错不会因混用let和var而受影响。这两个关键字声明的并不是不同类型的变量，它们只是指出变量在相关作用域如何存在。</span>
</code></pre></div><p>​	①  暂死性死区</p> <p>​		<code>let</code>与<code>var</code>的另一个重要的区别，就是<code>let</code>声明的变量不会再作用域中被提升。在<code>let</code>声明之前的执行瞬间被称为“暂死性死区”，在此阶段引用任何后面才声明的变量都会抛出<code>ReferenceError</code>。</p> <p>​	②  全局声明</p> <p>​		 与<code>var</code>关键字不同，使用<code>let</code>在全局作用域中声明的变量不会成为<code>window</code>对象的属性（<code>var</code>声明的变量则会）。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">'Matt'</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">// 'Matt'</span>

<span class="token keyword">let</span> age <span class="token operator">=</span> <span class="token number">26</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//  undefined</span>

<span class="token comment">// 不过，let声明仍然是在全局作用域中发生的，相应变量会在页面的生命周期内存续。因此，为了避免SyntaxError,必须确保页面不会重复声明同一个变量。</span>
</code></pre></div><p>​		③  条件声明</p> <p>在使用<code>var</code>声明变量时，由于声明会被提升，JavaScript引擎会自动将多余的声明在作用域顶部合并为一个声明。因为<code>let</code>的作用域是块，所以不可能检查前面是否已经使用<code>let</code>声明过变量，同时也就不可能在没声明的情况下引用它</p> <p>​		④  <code>for</code>循环中的<code>let</code>声明</p> <blockquote><p>在<code>let</code>出现之前，<code>for</code>循环定义的迭代变量会渗透到循环外部：</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 循环逻辑</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 5</span>
</code></pre></div><blockquote><p>改成使用<code>let</code>之后，这个问题就消失了，因为迭代变量的作用域仅限于<code>for</code>循环内部：</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> <span class="token operator">++</span> i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 循环逻辑</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// ReferenceError: i没有定义</span>
</code></pre></div><p>​			在使用<code>var</code>的时候，最常见的问题就是对迭代变量的奇特声明和修改：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// 你可能以为会输出0、1、2、3、4</span>
<span class="token comment">// 实际上会输出5、5、5、5、5</span>

<span class="token comment">// 之所以会这样，是因为在退出循环时，迭代变量保存的是导致循环退出的值：5。在之后执行超时逻辑时，所有的 i 都是同一个变量，因而输出的都是同一个最终值。</span>


<span class="token comment">// 而在使用 let 声明迭代变量时，JavaScript引擎在后台会为每个迭代循环声明一个新的迭代变量。每个 setTimeout 引用的都是不同的变量实例，所以 console.log 输出的是我们期望的值，也就是循环执行过程中每个迭代变量的值。</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// 会输出0、1、2、3、4</span>
</code></pre></div><h4 id="_3-4、声明风格及最佳实践"><a href="#_3-4、声明风格及最佳实践" class="header-anchor">#</a> 3.4、声明风格及最佳实践</h4> <p>​		ECMAScript 6增加<code>let</code>和 <code>const</code>从客观上为这门语言更精确地声明作用域和语义提供了更好的支持。从行为怪异的<code>var</code>所造成的各种问题，新的有助于提升代码质量的最佳实践也逐渐显现。</p> <p>​		①、不使用<code>var</code></p> <p>​				限制自己只使用<code>let</code>和<code>const</code>有助于提升代码质量，因为变量有了明确的作用域、声明位置以及不变的值。</p> <p>​		②、<code>const</code>优先，<code>let</code>次之</p> <p>​				使用<code>const</code>声明可以让浏览器运行时强制保持变量不变，也可以让静态代码分析工具提前发现不合法的赋值操作。应优先使用<code>const</code>来声明变量，只在提前知道未来会有修改时，再使用<code>let</code>。这样能让开发者更有信心地推断某些变量的值永远不会变，同时也能迅速发现因意外赋值导致的非预期行为。</p> <h3 id="_4、数据类型"><a href="#_4、数据类型" class="header-anchor">#</a> 4、数据类型</h3> <p>​			ECMAScript有6种简单数据类型（也称为原始类型）：<code>Undefined</code> 、<code>Null</code>、<code>Boolean</code>、<code>Number</code>、<code>String</code>和<code>Symbol</code>。<code>Symbol</code>（符号）是ECMAScript 6新增的。还有一种复杂数量类型叫 <code>Object</code>（对象）。<code>Object</code>是一种无序名值对的集合。因为在ECMAScript中不能定义自己的数据类型，所有值都可以用上述7种数据类型之一来表示。只有7种数据类型似乎不足以表示全部数据。但ECMAScript的数据很灵活，一种数据类型可以当作多种数据类型来使用。</p> <h4 id="_4-1-typeof操作符"><a href="#_4-1-typeof操作符" class="header-anchor">#</a> 4.1  <code>typeof</code>操作符</h4> <p>​		<code>typeof</code>在某些情况下返回的结果可能会让人费解，但技术上讲还是正确的。比如，调用<code>typeof null</code>返回的是<code>object</code>。这是因为特殊值<code>null</code>被认为是一个空对象的引用。</p> <blockquote><p>严格来讲，函数在ECMAScript中被认为是对象，并不代表一种数据类型。可是，函数也有自己特殊的属性。为此，就有必要通过<code>typeof</code>操作符来区分函数和其他对象。</p></blockquote> <h4 id=""><a href="#" class="header-anchor">#</a></h4> <h4 id="_4-2undefined类型"><a href="#_4-2undefined类型" class="header-anchor">#</a> 4.2	<code>Undefined</code>类型</h4> <p>​			<code>Undefined</code>类型只有一个值，就是特殊值<code>undefined</code>。当用<code>var</code>或<code>let</code>声明了变量但没有初始化时，就相当于给变量赋予了<code>undefined</code>值。</p> <blockquote><p>包含undefined值的变量跟未定义变量是有区别的。</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> message<span class="token punctuation">;</span>		<span class="token comment">// 这个变量被声明了，只是值为undefined</span>

<span class="token comment">// 确保没有声明过这个变量</span>
<span class="token comment">// let age</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">// &quot;undefined&quot;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">// 报错</span>
</code></pre></div><blockquote><p>在对未初始化的变量调用<code>typeof</code>时，返回的结果是<code>undefined</code>，但未声明的变量调用它时，返回的结果还是<code>undefined</code>，但对未声明的变量调用它时，返回的结果还是<code>undefined</code></p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> message<span class="token punctuation">;</span>	<span class="token comment">// 这个变量被声明了，只是值为undefined</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> message<span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">// &quot;undefined&quot;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> age<span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">// &quot;undefined&quot;</span>

<span class="token comment">// 无论声明还是未声明，typeof返回的都是字符串&quot;undefined&quot;。逻辑上讲这是对的，因为虽然严格来讲这两个变量存在根本性差异，但它对任何一个变量都不可能执行什么真正的操作。</span>
</code></pre></div><h4 id="_4-3null类型"><a href="#_4-3null类型" class="header-anchor">#</a> 4.3	<code>Null</code>类型</h4> <p>​				<code>Null</code>类型同样只有一个值，即特殊值<code>null</code>。逻辑上讲，<code>null</code>值表示一个空对象指针，这也是<code>typeof</code>传一个<code>null</code>会返回<code>object</code>的原因：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> car <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> car<span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">// &quot;object&quot;</span>
</code></pre></div><h4 id="_4-4-boolean类型"><a href="#_4-4-boolean类型" class="header-anchor">#</a> 4.4 <code>Boolean</code>类型</h4> <p>​			<code>Boolean</code>（布尔值）类型是ECMAScript中使用最频繁的类型之一。</p> <h4 id="_4-5-number类型"><a href="#_4-5-number类型" class="header-anchor">#</a> 4.5 <code>Number</code>类型</h4> <p>​			ECMAScript中最有意思的数据类型或许就是<code>Number</code>了。<code>Number</code>类型使用IEEE 754格式表示整数和浮点值。</p> <p>​			①、浮点值</p> <p>​				浮点值的精确度最高可达17位小数，但在算术计算中远不如整数精确。例如，0.1+0.2得到的不是0.3，二是0.300 000 000 000 000 04。由于这种微小的舍入错误，导致很难测试特定的浮点值。</p> <blockquote><p><strong>注意</strong>	之所以存在这种舍入错误，是因为使用了IEEE 754数值，这种错误并非ECMAScript所独有。其他使用相同格式的语言也有这个问题。</p></blockquote> <p>​</p> <p>​			②、值的范围</p> <p>​				由于内存的限制，ECMAScript并不支持表示这个世界上的所有数值。ECMAScript可以表示的最小数值保存在<code>Number.MIN_VALUE</code>中，这个值在多数浏览器中是5e-324；可以表示的最大数值保存在<code>Number.MAX_VALUE</code>中，这个值在多数浏览器中是1.7976932349623157e+308。如果某个计算得到的数值超出了JavaScript可以表示的范围，那么这个数值会被自动转换为一个特殊的<code>Infinity</code>（无穷）值。负无穷大：-Infinity，正无穷大：Infinity。</p> <blockquote><p>要确定一个值是不是有限大，可以使用<code>isFinite()</code></p></blockquote> <h4 id="_4-6-string类型"><a href="#_4-6-string类型" class="header-anchor">#</a> 4.6 <code>String</code>类型</h4> <p>​		<code>String</code>数据类型表示零或多个16位Unicode字符序列。</p> <p>​		<code>null</code>和<code>undefined</code>值没有<code>toString()</code>方法，而<code>String()</code>方法有</p> <h4 id="_4-7-symbol类型"><a href="#_4-7-symbol类型" class="header-anchor">#</a> 4.7 <code>Symbol</code>类型</h4> <p>​		<code>Symbol</code>是ECMAScript6新增的数据类型。符号是原始值，且符号实例唯一、不可变的。符号的用途是确保对象属性使用唯一标识符，不会发生属性冲突的危险。</p> <h4 id="_4-8-object类型"><a href="#_4-8-object类型" class="header-anchor">#</a> 4.8 <code>Object</code>类型</h4> <p>​		<code>ECMAScript</code>中的对象其实就是一组数据和功能的集合。对象通过<code>new</code>操作符后跟对象类型的名称来创建。通过创建<code>Object</code>类型的实例来创建自己的对象，给对象添加属性和方法。</p> <h3 id="_5、操作符"><a href="#_5、操作符" class="header-anchor">#</a> 5、操作符</h3> <h4 id="_5-1-一元操作符"><a href="#_5-1-一元操作符" class="header-anchor">#</a> 5.1 一元操作符</h4> <blockquote><p>只操作一个值的操作符</p></blockquote> <p>​	①、递增/递减操作符</p> <div class="language-js extra-class"><pre class="language-js"><code>num<span class="token operator">++</span>   <span class="token comment">//  先使用num再执行+1</span>
<span class="token operator">++</span>num   <span class="token comment">//  直接使用num+1后的值</span>
<span class="token punctuation">(</span><span class="token operator">--</span><span class="token punctuation">)</span> 同上
 
<span class="token keyword">let</span> s1 <span class="token operator">=</span> <span class="token string">'2'</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> s2 <span class="token operator">=</span> <span class="token string">'z'</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> f <span class="token operator">=</span> <span class="token number">1.1</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> o <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

s1<span class="token operator">++</span> <span class="token comment">// 3，字符串有效数值形式- 转换为数值再应用改变，变量类型变为数值。</span>
s2<span class="token operator">++</span> <span class="token comment">// NaN，字符串非有效数值形式- 转换为`NaN`，变量类型变为数值。</span>
b<span class="token operator">++</span> <span class="token comment">// 1，布尔值- false转换为0，true转换为1,变量类型变为数值。</span>
f<span class="token operator">--</span> <span class="token comment">// 0.1000000000000009(因为浮点型不精准)，浮点型- 加1或减1.</span>
o<span class="token operator">--</span> <span class="token comment">// -2，对象会调用`valueOf()`方法获取可以操作的值。得到值对应上述规则。如果`NaN`，调用`toString`并再次应用上述规则。 </span>
</code></pre></div><p>​	②、一元加减</p> <blockquote><p>一元加减由（+ -）表示，放在变量前头，对数值没任何影响</p></blockquote> <h4 id="_5-2-位操作符"><a href="#_5-2-位操作符" class="header-anchor">#</a> 5.2 位操作符</h4> <blockquote><p>用于数值的底层操作，也就是操作内存中表示数据的比特（位）</p></blockquote> <p>​</p> <p>①、按位非</p> <blockquote><p>用（~）表示，它的作用是对数值取反并减一。</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> num1 <span class="token operator">=</span> <span class="token number">25</span><span class="token punctuation">;</span> <span class="token comment">// 二进制</span>
<span class="token keyword">let</span> num2 <span class="token operator">=</span> <span class="token operator">~</span>num1<span class="token punctuation">;</span> <span class="token comment">// -26</span>

<span class="token comment">// 和下面操作一样</span>
<span class="token operator">-</span>num1 <span class="token operator">-</span> <span class="token number">1</span> <span class="token comment">// -26</span>
<span class="token comment">// 虽然返回结果一样，但是位操作符的速度快的多，因为位操作是在数值的底层表示上完成的。</span>
</code></pre></div><p>②、按位与</p> <blockquote><p>用（&amp;）表示，按位与操作在两个位都是1时返回1，在任何一位是0时返回0</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token number">25</span> <span class="token operator">&amp;</span> <span class="token number">3</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span> <span class="token comment">// 1</span>

<span class="token comment">// 二进制计算过程：</span>
	<span class="token number">25</span> <span class="token operator">=</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0001</span> <span class="token number">1001</span>
  	 <span class="token number">3</span> <span class="token operator">=</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0011</span>
   <span class="token constant">AND</span> <span class="token operator">=</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0001</span>
<span class="token comment">// 结果为 1</span>
</code></pre></div><p>③、按位或</p> <blockquote><p>用（|）表示，按位或操作在至少一位是1时返回1，两位都是0时返回0</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token number">25</span> <span class="token operator">|</span> <span class="token number">3</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span> <span class="token comment">// 27</span>

<span class="token comment">// 二进制计算过程：</span>
	<span class="token number">25</span> <span class="token operator">=</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0001</span> <span class="token number">1001</span>
  	 <span class="token number">3</span> <span class="token operator">=</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0011</span>
   <span class="token constant">AND</span> <span class="token operator">=</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0001</span> <span class="token number">1011</span>
<span class="token comment">// 结果为 27</span>
</code></pre></div><p>④、按位异或</p> <blockquote><p>用（^）表示，按位异或只在一位上是1的时候返回1（两位都是1或0，则返回0）</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token number">25</span> <span class="token operator">^</span> <span class="token number">3</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span> <span class="token comment">// 26</span>

<span class="token comment">// 二进制计算过程：</span>
	<span class="token number">25</span> <span class="token operator">=</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0001</span> <span class="token number">1001</span>
  	 <span class="token number">3</span> <span class="token operator">=</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0011</span>
   <span class="token constant">AND</span> <span class="token operator">=</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0001</span> <span class="token number">1010</span>
<span class="token comment">// 结果为 26</span>
</code></pre></div><p>⑤、左移</p> <blockquote><p>用（&lt;&lt;）表示，会按照指定的位数将数值的所有位向左移动。</p></blockquote> <p>⑥、有符号右移</p> <blockquote><p>用（&gt;&gt;）表示，会将数值的所有32位都向右移，同时保留符号。</p></blockquote> <p>⑦、无符号右移</p> <h4 id="_5-3-布尔操作符"><a href="#_5-3-布尔操作符" class="header-anchor">#</a> 5.3 布尔操作符</h4> <p>​	①、逻辑非</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">!</span><span class="token boolean">false</span>		<span class="token comment">// true</span>
<span class="token operator">!</span><span class="token string">&quot;blue&quot;</span>		<span class="token comment">// false</span>
<span class="token operator">!</span><span class="token number">0</span>			<span class="token comment">// true</span>
<span class="token operator">!</span><span class="token number">NaN</span>		<span class="token comment">// true</span>
<span class="token operator">!</span><span class="token string">&quot;&quot;</span>			<span class="token comment">// true</span>
<span class="token operator">!</span><span class="token number">12345</span>		<span class="token comment">// false</span>
</code></pre></div><p>​	②、逻辑与</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&amp;&amp;</span>
</code></pre></div><p>​	③、逻辑或</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">||</span>
</code></pre></div><h4 id="_5-4-乘性操作符"><a href="#_5-4-乘性操作符" class="header-anchor">#</a> 5.4 乘性操作符</h4> <p>​	①、乘法操作符</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">*</span>
</code></pre></div><p>​	②、除法操作符</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">/</span>
</code></pre></div><p>​	③、取模操作符</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">%</span>	<span class="token comment">// 数值操作，返回余数</span>
</code></pre></div><h4 id="_5-5-指数操作符"><a href="#_5-5-指数操作符" class="header-anchor">#</a> 5.5 指数操作符</h4> <blockquote><p>ECMAScript7新增了指数操作符，<code>Math.pow()</code>现在有了自己的操作符<code>**</code></p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code>Math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span>		<span class="token comment">// 9</span>
<span class="token number">3</span> <span class="token operator">**</span> <span class="token number">2</span>			    <span class="token comment">// 9</span>

包含自己的指数赋值操作符<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">**=</span><span class="token template-punctuation string">`</span></span>

<span class="token keyword">let</span> squared <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
squared <span class="token operator">**=</span> <span class="token number">2</span>
squared		<span class="token comment">// 9</span>
</code></pre></div><h4 id="_5-6-加性操作符"><a href="#_5-6-加性操作符" class="header-anchor">#</a> 5.6 加性操作符</h4> <p>​	①、加法操作符</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">+</span>
</code></pre></div><p>​	②、减法操作符</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">-</span>
</code></pre></div><h4 id="_5-7关系操作符"><a href="#_5-7关系操作符" class="header-anchor">#</a> 5.7关系操作符</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;</span><span class="token template-punctuation string">`</span></span>、 <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&gt;</span><span class="token template-punctuation string">`</span></span>、 <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;=</span><span class="token template-punctuation string">`</span></span>、 <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&gt;=</span><span class="token template-punctuation string">`</span></span>
<span class="token comment">// 数值比较,执行数值比较</span>
<span class="token comment">// 字符串比较, 逐个比较字符串中对应的字符编码。</span>
<span class="token comment">// 有任一操作数是数值，则会转换成数值操作</span>
<span class="token comment">// 任何与`NaN`的比较都返回`false`</span>

<span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token string">&quot;23&quot;</span> <span class="token operator">&lt;</span> <span class="token string">&quot;3&quot;</span>		<span class="token comment">// true</span>

</code></pre></div><h4 id="_5-8-相等操作符"><a href="#_5-8-相等操作符" class="header-anchor">#</a> 5.8 相等操作符</h4> <p>​	①、等于和不等于</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">==</span>
<span class="token operator">!=</span>
</code></pre></div><p>​	②、全等和不全等</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">===</span>
<span class="token operator">!==</span>
</code></pre></div><h4 id="_5-9-条件操作符"><a href="#_5-9-条件操作符" class="header-anchor">#</a> 5.9 条件操作符</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> max <span class="token operator">=</span> <span class="token punctuation">(</span>nmu1 <span class="token operator">&gt;</span> num2<span class="token punctuation">)</span> <span class="token operator">?</span> num1 <span class="token operator">:</span> num2
</code></pre></div><h4 id="_5-10-赋值操作符"><a href="#_5-10-赋值操作符" class="header-anchor">#</a> 5.10 赋值操作符</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">=</span>
</code></pre></div><h4 id="_5-11-逗号操作符"><a href="#_5-11-逗号操作符" class="header-anchor">#</a> 5.11 逗号操作符</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">,</span>
    
<span class="token keyword">let</span> num <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> num <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span> num <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> num <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>	<span class="token comment">// num的值为0</span>
</code></pre></div><h3 id="_6、语句"><a href="#_6、语句" class="header-anchor">#</a> 6、语句</h3> <h4 id="_6-1-if语句"><a href="#_6-1-if语句" class="header-anchor">#</a> 6.1  	if语句</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>xxx<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token operator">...</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
	<span class="token operator">...</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_6-2-do-while语句"><a href="#_6-2-do-while语句" class="header-anchor">#</a> 6.2 do-while语句</h4> <blockquote><p><code>do-while</code>是一种后测试循环语句，即循环体中的代码执行后才会对退出条件进行执行。（循环体内的代码至少执行一次）</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">do</span> <span class="token punctuation">{</span>
   i <span class="token operator">+=</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">while</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="_6-3-while语句"><a href="#_6-3-while语句" class="header-anchor">#</a> 6.3 while语句</h4> <blockquote><p><code>while</code>语句是一种先测试循环语句，即先检测退出条件，再执行循环体内的代码。（循环体内的代码可能不会执行）</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> 
<span class="token keyword">while</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    i <span class="token operator">+=</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_6-4-for语句"><a href="#_6-4-for语句" class="header-anchor">#</a> 6.4 for语句</h4> <blockquote><p><code>for</code>语句也是先测试语句，只不过增加了进入循环之前的初始化代码，以及循环执行后要执行的表达式</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> count <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> count<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> count <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">while</span><span class="token punctuation">(</span>i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    i<span class="token operator">++</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 无法通过`while`循环实现的逻辑，同样也无法使用`for`循环实现。`for`循环只是将循环相关的代码封装在了一起。</span>
</code></pre></div><blockquote><p><code>for</code>循环的初始化代码中，可以不使用变量声明的关键字。初始化定义的迭代器变量在循环执行完成后几乎不可能再用到。最清晰的写法是使用<code>let</code>声明迭代器变量，这样可以将变量的作用域限定再循环中。</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 初始化/条件表达式和循环后表达式都不是必需的，可以创建一个无穷循环：</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 只要包含条件表达式，for循环就成了while</span>
<span class="token keyword">let</span> count <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token punctuation">;</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> count<span class="token punctuation">;</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    i<span class="token operator">++</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_6-5-for-in语句"><a href="#_6-5-for-in语句" class="header-anchor">#</a> 6.5 for-in语句</h4> <blockquote><p><code>for-in</code>语句是一种严格的迭代语句，用于枚举对象中的非符号键属性</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> propName <span class="token keyword">in</span> window<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    document<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>propName<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// ECMAScript中对象的属性是无序的，因此`for-in`语句不能保证返回对象属性的顺序。（所有可枚举的属性都会返回一次，但返回的顺序可能会因为浏览器而异。）</span>
<span class="token comment">//如果`for-in`循环要迭代的变量是`null`或`nudefined`， 则不执行循环体。</span>
</code></pre></div><h4 id="_6-6-for-of语句"><a href="#_6-6-for-of语句" class="header-anchor">#</a> 6.6 for-of语句</h4> <blockquote><p><code>for-of</code>语句是一种严格的迭代语句，用于遍历可迭代对象的元素</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> el <span class="token keyword">of</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    document<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_6-7-标签语句"><a href="#_6-7-标签语句" class="header-anchor">#</a> 6.7 标签语句</h4> <div class="language-js extra-class"><pre class="language-js"><code>lable<span class="token operator">:</span> statement
</code></pre></div><h4 id="_6-8-break和continue语句"><a href="#_6-8-break和continue语句" class="header-anchor">#</a> 6.8 break和continue语句</h4> <blockquote><p><code>break</code>语句用于立即退出循环，强制执行循环后的下一条语句。</p> <p><code>coontinue</code>语句也用于立即退出循环，强制执行循环后的下一条语句。</p></blockquote> <h4 id="_6-9-with语句"><a href="#_6-9-with语句" class="header-anchor">#</a> 6.9 with语句</h4> <blockquote><p><code>whith</code>语句的用途是将代码作用域设置为特定的对象</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 使用`with`语句的主要场景是针对一个对象反复操作，这个时候将代码作用域设置为该对象能提供便利</span>

<span class="token keyword">let</span> qs <span class="token operator">=</span> location<span class="token punctuation">.</span>search<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> hostName <span class="token operator">=</span> location<span class="token punctuation">.</span>hostname<span class="token punctuation">;</span>
<span class="token keyword">let</span> url <span class="token operator">=</span> location<span class="token punctuation">.</span>href<span class="token punctuation">;</span>

<span class="token keyword">with</span><span class="token punctuation">(</span>location<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> qs <span class="token operator">=</span> search<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">let</span> hostName <span class="token operator">=</span> hostname<span class="token punctuation">;</span>
	<span class="token keyword">let</span> url <span class="token operator">=</span> href<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 这里，`with`语句用于连接`location`对象。在这个语句内部，每个变量首先会被认为是一个局部变量。如果没有找到该局部变量，则会搜索`location`对象，看它是否有一个同名的属性，如果有，则该变量会被求值为`location`对象的属性。</span>

<span class="token comment">// 严格模式不允许使用`with`语句，会抛出错误</span>
</code></pre></div><h4 id="_6-10-switch语句"><a href="#_6-10-switch语句" class="header-anchor">#</a> 6.10 switch语句</h4> <blockquote><p><code>switch</code>语句是与<code>if</code>语句紧密相关的一种流控制语句</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">switch</span> <span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">case</span> <span class="token number">25</span><span class="token punctuation">;</span>
      <span class="token comment">//跳过</span>
   <span class="token keyword">case</span> <span class="token number">35</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'25 or 35'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
   <span class="token keyword">case</span> <span class="token number">45</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'45'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
   <span class="token keyword">default</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'other'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_7、函数"><a href="#_7、函数" class="header-anchor">#</a> 7、函数</h3> <p>​		函数对任何语音来说都是核心组件，因为他们可以封装语句，然后在任何地方、任何时间执行。</p> <h3 id="_8、小结"><a href="#_8、小结" class="header-anchor">#</a> 8、小结</h3> <blockquote><p>JavaScript的核心语音特性在ECMA-262中以伪语音ECMAScript的形式来定义。ECMAScript包含所有基本语法、操作符、数据类型和对象，能完成基本的计算任务，但没有提供获得输入和产生输出的机制。</p></blockquote> <h2 id="四、变量、作用域与内存"><a href="#四、变量、作用域与内存" class="header-anchor">#</a> 四、变量、作用域与内存</h2> <h3 id="_1、原始值与引用值"><a href="#_1、原始值与引用值" class="header-anchor">#</a> 1、原始值与引用值</h3> <blockquote><p><strong>原始值</strong>：就是最简单的数据。</p> <p><strong>引用值</strong>：是由多个值构成的对象。</p></blockquote> <p><code>Undefined</code>、<code>Null</code>、<code>Boolean</code>、<code>Nubmer</code>、<code>String</code>和<code>Symbol</code>。保存原始值的变量是<strong>按值</strong>访问的，操作的就是储存在变量中的实际值。</p> <p>引用值是保存在内存中的对象。JavaScript不允许直接访问内存位置，所不能直接操作对象所在的内存空间。在操作对象时，实际上操作的是对该对象的<strong>引用</strong>而非实际的对象本身。为此，保存引用值的变量是<strong>按引用</strong>访问的</p> <h4 id="_1-1、动态属性"><a href="#_1-1、动态属性" class="header-anchor">#</a> 1.1、动态属性</h4> <p>原始值不能有属性。引用值有属性。</p> <h4 id="_1-2、复制值"><a href="#_1-2、复制值" class="header-anchor">#</a> 1.2、复制值</h4> <p><strong>原始值</strong>：通过变量把原始值赋值到另一个变量时，原始值会被赋值到新的变量位置。（变量可以独立使用，互不干扰。）</p> <p><strong>引用值</strong>：同上，引用值虽然值会被复制到新变量所在的位置。但是两个变量的指针指向内存中的地址还是一个。（操作一个对象会同步反映再另一个对象上。）</p> <h4 id="_1-3、传递参数"><a href="#_1-3、传递参数" class="header-anchor">#</a> 1.3、传递参数</h4> <p>ECMAScript中所有函数的参数都是按值传递的。意味着函数外的值会被复制到函数内部参数中，就像从一个变量复制到另一个变量。如果是原始值，那么就跟原始值的复制一样，如果是引用值，那么就跟引用值变量的复制一样。</p> <blockquote><p>按值传递参数时，值会复制到同一个局部变量（即一个命名参数，或者用ECMAScript的话说，就是<code>arguments</code>对象中的一个槽位）。在按引用传递参数时，值在内存中的位置会被保存在一个局部变量，这意味着对本地变量的修改会反映到函数外部。（这在ECMAScript中是不可能的。</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">addTen</span><span class="token punctuation">(</span><span class="token parameter">num</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    num <span class="token operator">+=</span><span class="token number">10</span><span class="token punctuation">;</span><span class="token keyword">return</span> num<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> count <span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token function">addTen</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">// 20，没有变化</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 30</span>

<span class="token comment">// 这个事实在使用数值这样的原始值时是非常明显的。</span>
</code></pre></div><blockquote><p>如果变量中传递的是对象，就没那么清楚了</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">setName</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    obj<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;Nicholas&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> preson <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">setName</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>person<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token comment">// &quot;Nicholas&quot;</span>
</code></pre></div><p>在函数内部，<code>obj</code>和<code>person</code>都指向同一个对象。结果就是，即使对象是按值传进函数的，<code>obj</code>也会通过引用访问对象。当函数内部给<code>obj</code>设置了<code>name</code>属性时，函数外部的对象也会反映这个变化，因为<code>obj</code>指向的对象保存在全局作用域的堆栈上。很多开发者错误的认为，当局部作用域中修改对象而变化反映到全局时，就意味着参数是按引用传递。</p> <blockquote><p>为证明对象是按值传递的，我们再来看看下面这个修改后的例子：</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">setName</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    obj<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;Nicholas&quot;</span><span class="token punctuation">;</span> 
    obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    obj<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;Greg&quot;</span><span class="token punctuation">;</span> 
<span class="token punctuation">}</span>
<span class="token keyword">let</span> person <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token function">setName</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">;</span> 
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>person<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;Nicholas&quot;</span>
</code></pre></div><p>如果<code>person</code>是按引用传递的，那么<code>person</code>应该自动将指针改为<code>name</code>为<code>Greg</code>的对象。可现在它的值仍是<code>&quot;Nicholas&quot;</code>,这表明函数中参数的值改变后，原始的引用仍然没变。当<code>obj</code>在函数内部被重写时，它变成了一个指向本地对象的指针。而那个本地对象在函数执行结束时就被销毁了。</p> <blockquote><p><strong>注意</strong>	ECMAScript中函数的参数就是局部变量。</p></blockquote> <h4 id="_1-4、确定类型"><a href="#_1-4、确定类型" class="header-anchor">#</a> 1.4、确定类型</h4> <p><code>typeof</code>是判断一个变量是否为字符串、数值、布尔值或<code>undefined</code>的最好方式。如果值是对象或<code>null</code>，会返回<code>&quot;object&quot;</code>。（它对原始值很有用，但对引用值用处不大）</p> <p>ECMAScript提供了 instanceof 操作符，语法如下：</p> <div class="language-js extra-class"><pre class="language-js"><code>result <span class="token operator">=</span> variable <span class="token keyword">instanceof</span> <span class="token class-name">constructor</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>person <span class="token keyword">instanceof</span> <span class="token class-name">Object</span><span class="token punctuation">)</span> <span class="token comment">// 变量person是Object?</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr <span class="token keyword">instanceof</span> <span class="token class-name">Array</span><span class="token punctuation">)</span> <span class="token comment">// 变量person是Array?</span>
</code></pre></div><blockquote><p>按照定义，所有引用值都是<code>Objec</code>的实例，因此通过<code>instanceof</code>操作符检测任何引用值和<code>Object</code>构造函数都会返回<code>true</code>。类似，检测原始值，始终返回<code>false</code></p></blockquote> <h3 id="_2、执行上下文与作用域"><a href="#_2、执行上下文与作用域" class="header-anchor">#</a> 2、执行上下文与作用域</h3> <p>​	执行上下文是评估和执行JavaScript代码的环境的抽象概念。JavaScript代码都是在执行上下文中允运行。</p> <blockquote><p>JavaScript的可执行代码的类型只有三种，全局代码、函数代码、eval代码。</p></blockquote> <p>对应着<code>JavaScript</code>三种执行上下文类型：</p> <ul><li>全局执行上下文</li> <li>函数执行上下文</li> <li>块级上下文</li></ul> <p>作用域就是变量与函数的可访问范围，即作用域控制着变量与函数的可见性和生命周期。</p> <h4 id="_2-1、作用域链增强"><a href="#_2-1、作用域链增强" class="header-anchor">#</a> 2.1、作用域链增强</h4> <p>​	虽然执行上下文有三种，但有其他方式来增强作用域链。某些语句会导致在作用域链前端临时添加一个上下文，这个上下文在代码执行后会被删除。</p> <ul><li><code>try</code>/<code>catch</code>语句的<code>catch</code>块</li> <li><code>with</code>语句</li></ul> <h4 id="_2-2、变量声明"><a href="#_2-2、变量声明" class="header-anchor">#</a> 2.2、变量声明</h4> <blockquote><p>ES5之前，<code>var</code>是声明变量的唯一关键字。</p> <p>ES6之后，增加了<code>let</code>和<code>const</code>两个关键字。（成为首选）</p></blockquote> <p>①、使用<code>var</code>的函数作用域声明</p> <p>​		在使用<code>var</code>声明变量时，变量会自动添加到最接近的上下文。在函数中，最接近的上下文就是函数的局部上下文。如果变量未经声明就被初始化了，那么它就会自动被添加到全局上下文。</p> <p>EX1：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token parameter">num1<span class="token punctuation">,</span> num2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> sum <span class="token operator">=</span> num1 <span class="token operator">+</span> num2<span class="token punctuation">;</span>
    <span class="token keyword">return</span> sum
<span class="token punctuation">}</span>
<span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">// 30</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>sum<span class="token punctuation">)</span><span class="token punctuation">;</span>		    <span class="token comment">// 报错：sum在这里不是有效变量</span>
<span class="token comment">// 外部访问不到函数内部使用 `var` 声明的局部变量</span>
</code></pre></div><p>省略<code>var</code>即可访问，EX2：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token parameter">num1<span class="token punctuation">,</span> num2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    sunm <span class="token operator">=</span> num1 <span class="token operator">+</span> num2<span class="token punctuation">;</span>
    <span class="token keyword">return</span> sum<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">// 30</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>sum<span class="token punctuation">)</span><span class="token punctuation">;</span>		    <span class="token comment">// 30</span>
<span class="token comment">// 变量 `sum` 初始化时并未用 `var` 声明。 在调用 add() 后， `sum`被添加到全局上下文，在函数退出后依然存在，从后面可以访问到。</span>
</code></pre></div><p>​		<code>var</code>声明会被拿到函数或全局作用域的顶部，位于作用域中所有代码之前。这个现象叫作“提升”。</p> <p>②、使用<code>let</code>的块级作用域声明</p> <p>​		块级作用域是由最近 的一对包括花括号<code>{}</code>界定。换句话说，<code>if</code>块、<code>while</code>块、<code>function</code>块都是它的声明变量的作用域。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">// 20</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> <span class="token operator">++</span>j<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>		<span class="token comment">// ReferenceError: j没有定义</span>

<span class="token comment">// `let`非常适合在循环中声明迭代变量。使用var声明的迭代变量会泄露到循环外部。</span>
</code></pre></div><p>③、使用<code>const</code>的常量声明</p> <p>​		使用<code>const</code>声明的变量必须同时初始化为某个值。一经声明，在其生命周期的任何时候都不能再重新赋值。但对象的键则不受限制。</p> <p>④、标识符查找</p> <p>​		当在特定上下文中为读取或写入而引用一个标识符，必须通过搜索确定这个标识符表示什么。搜索开始于作用域前端，以给定的名称搜索对应的标识符。如果在局部上下文中找到该标识符，则停止，变量确定；如果没有找到变量名，则继续沿作用域搜索。任然没找到说明没定义。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> color <span class="token operator">=</span> <span class="token string">'blue'</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">getColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> color <span class="token operator">=</span> <span class="token string">'red'</span><span class="token punctuation">;</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">let</span> color <span class="token operator">=</span> <span class="token string">'green'</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> color
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">getColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 'green'</span>

<span class="token comment">// 调用函数时，变量被声明。执行函数返回语句，代码引用了变量color。</span>
<span class="token comment">// 开始在局部上下文中搜索这个标识符，然后找到了值为’green‘的变量，找到！搜索随即停止。</span>
</code></pre></div><h3 id="_3、垃圾回收"><a href="#_3、垃圾回收" class="header-anchor">#</a> 3、垃圾回收</h3> <p>​		JavaScript是使用垃圾回收的语言，即 执行环境负责在代码执行时管理内存。C和C++语言中，跟踪内存使用对开发者来说是个很大的负担，也是n多问题的来源。JS开发者卸下这负担，通过自动内存管理实现内存分配和闲置资源回收。</p> <p>思路：</p> <blockquote><p>​		确定哪个变量不在使用，然后释放它占用的内存。过程是周期性，即垃圾回收机制每隔一定时间（或者说在代码执行过程中某个预定的收集时间）就会自动搞一次。</p> <p>​		垃圾回收过程是一个近似且不完美的方案，因为某块内存是否还有用，属于“不可判定的”问题，意味着靠算法是解决不了的。</p></blockquote> <p>垃圾回收程序必须跟踪记录哪个变量是还要用还是不在用了，不过标记变量的实现方式主要有两种策略：标记清理和引用计数。</p> <h4 id="_3-1、标记清理"><a href="#_3-1、标记清理" class="header-anchor">#</a> 3.1、标记清理</h4> <p>​		JavaScript最常用的垃圾回收策略是<strong>标记清理</strong>。</p> <p>简述：</p> <blockquote><p>​		当变量进入上下文，比如在函数内部声明一个变量时，这个变量会被加上存于上下文中的标记。而不在上下文中的变量，逻辑上讲，永远不应该释放它们的内存，因为只要上下文中的代码在运行，就可能用到它们。当变量离开上下文时，也会被加上离开上下文的标记。</p> <p>​		给变量加标记的方式有n种。比如，当变量进入上下文时，反转某一位；维护“在上下文”和“不在上下文”列表，进行切换。标记过程的实现并不重要，关键是策略。</p></blockquote> <p>咋做的：</p> <p>​		垃圾回收程序运行时，会标记内存中存储的所有变量。然后，它会将所有在上下文中的变量，以及被在上下文中的变量引用的变量的标记去掉。在此之后再被加上标记的变量就是待删除的了，原因是任何在上下文中的变量都访问不到他们了。随后垃圾回收程序做一次<strong>内存清理</strong>，销毁带标记的所有值并回收它们的内存。</p> <h4 id="_3-2、引用计数"><a href="#_3-2、引用计数" class="header-anchor">#</a> 3.2、引用计数</h4> <p>​		不常用，自己去看小红书。</p> <h4 id="_3-3、性能"><a href="#_3-3、性能" class="header-anchor">#</a> 3.3、性能</h4> <p>​		垃圾回收程序周期性运行，如果内存中分配了很多变量，则可能造成性能损失，因此垃圾回收的时间调度很重要。</p> <h4 id="_3-4、内存管理"><a href="#_3-4、内存管理" class="header-anchor">#</a> 3.4、内存管理</h4> <p>​		内存限制不仅影响变量分配，也影响调用栈以及能够同时在一个线程中执行的语句数量。</p> <p>①、通过<code>const</code>和<code>let</code>声明提升性能</p> <p>​		以块为作用域，能尽早的让垃圾回收程序介入回收内存</p> <p>②、隐藏类和删除操作</p> <p>​		V8在将解释后的JavasScript代码编译为实际的机器时会利用“隐藏类”。若你注重性能，很重要。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Article</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token string">&quot;xxding4&quot;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> a1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Article</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> a2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Article</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// V8会在后台配置，让这两个类实例共享相同的隐藏类，因为这两个实例共享同一个构造函数和原型</span>
<span class="token comment">// 假设添加如下代码：</span>
a2<span class="token punctuation">.</span>author <span class="token operator">=</span> <span class="token string">'Jake'</span>

<span class="token comment">// 此时两个`Article`实例就会对应两个不同的隐藏类。这样操作频率和隐藏类的大小，可能对性能产生明显影响</span>
<span class="token comment">// 解决方案就是避免JavaScript的”先创建在补充“式的动态属性赋值，且在构造函数中一次声明所有属性，如下</span>

<span class="token keyword">function</span> <span class="token function">Article</span><span class="token punctuation">(</span><span class="token parameter">opt_author</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token string">&quot;xxding4&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>author <span class="token operator">=</span> opt_author<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> a1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Article</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> a2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Article</span><span class="token punctuation">(</span><span class="token string">'jake'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 这样，两个实例基本上就一样了，共享一个隐藏类，从而带来潜在的性能提升。</span>
<span class="token comment">// But记住，用`delete`关键字后，它们不会再共享一个隐藏类。</span>
<span class="token comment">// 动态删除和添加属性导致的后果一致，最佳实践是把不想要的属性设置为`null`。</span>
</code></pre></div><p>③、内存泄漏</p> <p>​		JavaScript中的内存泄露大部分是由不合理的引用导致的。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 闭包导致的内存泄露</span>

<span class="token keyword">let</span> <span class="token function-variable function">outer</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> name <span class="token operator">=</span> <span class="token string">'Jake'</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> name
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>④、静态分配与对象池</p> <p>无</p> <h3 id="_4、小结-2"><a href="#_4、小结-2" class="header-anchor">#</a> 4、小结</h3> <p>​		JavaScript可以保存两种类型的值：原始值和引用值(即对象)。原始数据类型可以是<code>Undefined</code>，<code>Null</code>，<code>Boolean</code>，<code>Number</code>，<code>String</code>和<code>Symbol</code>。</p> <p>​	原始值大小固定，保存在栈内存上。引用值是对象，储存在堆内存上。</p> <h2 id="五、基本引用类型"><a href="#五、基本引用类型" class="header-anchor">#</a> 五、基本引用类型</h2> <p>​	对象被认为是某个特定引用类型的实例。新对象通过使用 <code>new</code> 操作符后跟一个<strong>构造函数</strong>(constructor)来创建。构造函数就是用来创建新对象的函数，比如</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> now <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="_1、date"><a href="#_1、date" class="header-anchor">#</a> 1、Date</h3> <p>​		ECMAScript提供了<code>Date.now()</code> 方法，返回表示方法执行日期和时间的毫秒数。</p> <h4 id="_1-1继承的方法"><a href="#_1-1继承的方法" class="header-anchor">#</a> 1.1继承的方法</h4> <p>​		和其他类型一样，<code>Date</code>类型重写了<code>toLocaleString()</code>、<code>toString()</code>和<code>valueOf()</code>方法。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 'Mon Nov 08 2021 20:13:31 GMT+0800 (中国标准时间)'</span>
<span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLocaleString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// '2021/11/8 下午8:13:48'</span>

<span class="token comment">// 操作符（如大于号和小于号）可以直接使用它返回的值</span>
<span class="token keyword">let</span> date1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token number">2021</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> date2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token number">2021</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
date1 <span class="token operator">&lt;</span> date2 <span class="token comment">// true</span>
date1 <span class="token operator">&gt;</span> date2 <span class="token comment">// false</span>
</code></pre></div><h4 id="_1-2日期格式化方法"><a href="#_1-2日期格式化方法" class="header-anchor">#</a> 1.2日期格式化方法</h4> <blockquote><p><code>Date</code>类型有几个专门用于格式化日期的方法，它们都会返回字符串：</p></blockquote> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">toDateString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>	<span class="token comment">// 显示日期中的周几、月、日、年</span>
<span class="token function">toTimeString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>	<span class="token comment">// 显示日期中的时、分、秒和时区</span>
<span class="token function">toLocaleDateString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>	<span class="token comment">// 显示日期中的周几、月、日、年</span>
<span class="token function">toLocaleTimeString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>	<span class="token comment">// 显示日期中的时、分、秒</span>
<span class="token function">toUTCString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>	<span class="token comment">// 显示完整的UTC日期</span>
</code></pre></div><h4 id="_1-3日期-时间组件方法"><a href="#_1-3日期-时间组件方法" class="header-anchor">#</a> 1.3日期/时间组件方法</h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span>								<span class="token comment">// 返回日期的毫秒表示</span>
<span class="token function">setTime</span><span class="token punctuation">(</span>milliseconds<span class="token punctuation">)</span>					<span class="token comment">// 设置日期的毫秒数表示，从而修改整个日期</span>

<span class="token function">getFullYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span>							<span class="token comment">// 返回4位数年</span>
<span class="token function">getUTCFullYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span>						<span class="token comment">// 返回UTC日期的4位数年</span>
<span class="token function">setFullYear</span><span class="token punctuation">(</span>year<span class="token punctuation">)</span>						<span class="token comment">// 设置日期的年（`year`必须是4位数）</span>
<span class="token function">setUTCFullYear</span><span class="token punctuation">(</span>year<span class="token punctuation">)</span>					<span class="token comment">// 设置UTC日期的年（`year`必须是4位数）</span>

<span class="token function">getMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span>								<span class="token comment">// 返回日期的月（0表示1月，11表示12月）</span>
<span class="token function">getUTCMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span>							<span class="token comment">// 返回UTC日期的月（0表示1月，11月表示12月）</span>
<span class="token function">setMonth</span><span class="token punctuation">(</span>month<span class="token punctuation">)</span>							<span class="token comment">// 设置日期的月（`monyh`为大于0小于11）</span>

<span class="token comment">// UTC同上，下面都不写了</span>

<span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>								<span class="token comment">// 返回日期中的日（1~31）</span>
<span class="token function">setDate</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span>							<span class="token comment">// 设置日期中的日（如果`date`大于该月天数，则加月）</span>

<span class="token function">getDay</span><span class="token punctuation">(</span><span class="token punctuation">)</span>								<span class="token comment">// 返回日期中表示周几的数值（0表示周日，6表示周六）</span>

<span class="token function">getHours</span><span class="token punctuation">(</span><span class="token punctuation">)</span>								<span class="token comment">// 返回日期中的时（0~23）</span>
<span class="token function">setHours</span><span class="token punctuation">(</span>hours<span class="token punctuation">)</span>							<span class="token comment">// 设置日期中的时（如果`hours`大于23，则加日）</span>

<span class="token function">getMinutes</span><span class="token punctuation">(</span><span class="token punctuation">)</span>							<span class="token comment">// 返回日期中的分（0~59）</span>
<span class="token function">setMinutes</span><span class="token punctuation">(</span>minutes<span class="token punctuation">)</span>						<span class="token comment">// 设置日期中分（如果`minutes`大于59则加时）</span>

<span class="token function">getSeconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span>							<span class="token comment">// 返回日期中的秒（0~59）</span>
<span class="token function">setSeconds</span><span class="token punctuation">(</span>seconds<span class="token punctuation">)</span>						<span class="token comment">// 设置日期重的秒（如果`seconds`大于59则加分）</span>

<span class="token function">getMillseconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span>						<span class="token comment">// 返回日期中的毫秒数</span>
<span class="token function">setMillseconds</span><span class="token punctuation">(</span>milliseconds<span class="token punctuation">)</span>			<span class="token comment">// 设置日期中的毫秒数</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/xiaoyu_blog/Language/Node/Reptiles%E7%88%AC%E8%99%AB/" class="prev">
        Reptiles爬虫
      </a></span> <span class="next"><a href="/xiaoyu_blog/Language/JavaScript/ES6/">
        ES6
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/xiaoyu_blog/assets/js/app.04d90341.js" defer></script><script src="/xiaoyu_blog/assets/js/2.0c3dc4c5.js" defer></script><script src="/xiaoyu_blog/assets/js/8.b30e1d81.js" defer></script>
  </body>
</html>
