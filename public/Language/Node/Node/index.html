<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Node | 小羽</title>
    <meta name="generator" content="VuePress 1.5.2">
    <link rel="icon" href="/xiaoyu_blog/favicon.ico">
    <script language="javascript" type="text/javascript" src="/xiaoyu_blog/js/mouseClick.js"></script>
    <meta name="description" content="此心光明，亦复何言">
    <link rel="preload" href="/xiaoyu_blog/assets/css/0.styles.377b39b4.css" as="style"><link rel="preload" href="/xiaoyu_blog/assets/js/app.46baccfe.js" as="script"><link rel="preload" href="/xiaoyu_blog/assets/js/2.0c3dc4c5.js" as="script"><link rel="preload" href="/xiaoyu_blog/assets/js/17.2ff004d5.js" as="script"><link rel="prefetch" href="/xiaoyu_blog/assets/js/10.7970aac1.js"><link rel="prefetch" href="/xiaoyu_blog/assets/js/11.daf2b723.js"><link rel="prefetch" href="/xiaoyu_blog/assets/js/12.a7864445.js"><link rel="prefetch" href="/xiaoyu_blog/assets/js/13.dafb327a.js"><link rel="prefetch" href="/xiaoyu_blog/assets/js/14.df0aaf05.js"><link rel="prefetch" href="/xiaoyu_blog/assets/js/15.0cf1dec4.js"><link rel="prefetch" href="/xiaoyu_blog/assets/js/16.2e7e1dea.js"><link rel="prefetch" href="/xiaoyu_blog/assets/js/18.77c71cad.js"><link rel="prefetch" href="/xiaoyu_blog/assets/js/3.22c99b79.js"><link rel="prefetch" href="/xiaoyu_blog/assets/js/4.3e0333c7.js"><link rel="prefetch" href="/xiaoyu_blog/assets/js/5.7117a645.js"><link rel="prefetch" href="/xiaoyu_blog/assets/js/6.83ee3653.js"><link rel="prefetch" href="/xiaoyu_blog/assets/js/7.3267bfd7.js"><link rel="prefetch" href="/xiaoyu_blog/assets/js/8.df59288d.js"><link rel="prefetch" href="/xiaoyu_blog/assets/js/9.16a15e80.js">
    <link rel="stylesheet" href="/xiaoyu_blog/assets/css/0.styles.377b39b4.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/xiaoyu_blog/" class="home-link router-link-active"><!----> <span class="site-name">小羽</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/xiaoyu_blog/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language" class="dropdown-title"><span class="title">Language</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/xiaoyu_blog/Language/Node/Node/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Node
</a></li><li class="dropdown-item"><!----> <a href="/xiaoyu_blog/Language/JavaScript/JavaScript/" class="nav-link">
  JavaScript
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Guide" class="dropdown-title"><span class="title">Guide</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/xiaoyu_blog/Guide/Vue/Vue_mvvm/" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/xiaoyu_blog/Guide/Axios/" class="nav-link">
  Axios
</a></li><li class="dropdown-item"><!----> <a href="/xiaoyu_blog/Guide/SSO/" class="nav-link">
  SSO
</a></li><li class="dropdown-item"><!----> <a href="/xiaoyu_blog/Guide/Git/" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/xiaoyu_blog/Guide/Webpack/" class="nav-link">
  Webpack
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label=" Contact" class="dropdown-title"><span class="title"> Contact</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/dingxingxing" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.cnblogs.com/dingxingxing" target="_blank" rel="noopener noreferrer" class="nav-link external">
  博客园
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/xiaoyu_blog/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language" class="dropdown-title"><span class="title">Language</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/xiaoyu_blog/Language/Node/Node/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Node
</a></li><li class="dropdown-item"><!----> <a href="/xiaoyu_blog/Language/JavaScript/JavaScript/" class="nav-link">
  JavaScript
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Guide" class="dropdown-title"><span class="title">Guide</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/xiaoyu_blog/Guide/Vue/Vue_mvvm/" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/xiaoyu_blog/Guide/Axios/" class="nav-link">
  Axios
</a></li><li class="dropdown-item"><!----> <a href="/xiaoyu_blog/Guide/SSO/" class="nav-link">
  SSO
</a></li><li class="dropdown-item"><!----> <a href="/xiaoyu_blog/Guide/Git/" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/xiaoyu_blog/Guide/Webpack/" class="nav-link">
  Webpack
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label=" Contact" class="dropdown-title"><span class="title"> Contact</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/dingxingxing" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.cnblogs.com/dingxingxing" target="_blank" rel="noopener noreferrer" class="nav-link external">
  博客园
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Language </span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>Node</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/xiaoyu_blog/Language/Node/Node/" aria-current="page" class="active sidebar-link">Node</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/xiaoyu_blog/Language/Node/Node/#node-js简介" class="sidebar-link">Node.js简介</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/xiaoyu_blog/Language/Node/Node/#_1-node-js是什么" class="sidebar-link">1.Node.js是什么</a></li><li class="sidebar-sub-header"><a href="/xiaoyu_blog/Language/Node/Node/#_2-node-js特性（记住三句话）" class="sidebar-link">2.Node.js特性（记住三句话）</a></li></ul></li><li class="sidebar-sub-header"><a href="/xiaoyu_blog/Language/Node/Node/#node在一线企业中的运用" class="sidebar-link">Node在一线企业中的运用</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/xiaoyu_blog/Language/Node/Node/#作为中间层" class="sidebar-link">作为中间层</a></li><li class="sidebar-sub-header"><a href="/xiaoyu_blog/Language/Node/Node/#做项目构建工具" class="sidebar-link">做项目构建工具</a></li><li class="sidebar-sub-header"><a href="/xiaoyu_blog/Language/Node/Node/#做一些小型网站后端" class="sidebar-link">做一些小型网站后端</a></li></ul></li><li class="sidebar-sub-header"><a href="/xiaoyu_blog/Language/Node/Node/#node-js事件" class="sidebar-link">Node.js事件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/xiaoyu_blog/Language/Node/Node/#node-js事件循环" class="sidebar-link">Node.js事件循环</a></li></ul></li><li class="sidebar-sub-header"><a href="/xiaoyu_blog/Language/Node/Node/#node-js模块化理解" class="sidebar-link">Node.js模块化理解</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/xiaoyu_blog/Language/Node/Node/#_1-require" class="sidebar-link">1.require</a></li><li class="sidebar-sub-header"><a href="/xiaoyu_blog/Language/Node/Node/#_2-exports" class="sidebar-link">2.exports</a></li><li class="sidebar-sub-header"><a href="/xiaoyu_blog/Language/Node/Node/#_3-module-exports" class="sidebar-link">3.module.exports</a></li><li class="sidebar-sub-header"><a href="/xiaoyu_blog/Language/Node/Node/#_4-模块初始化" class="sidebar-link">4.模块初始化</a></li><li class="sidebar-sub-header"><a href="/xiaoyu_blog/Language/Node/Node/#_5-主模块" class="sidebar-link">5.主模块</a></li><li class="sidebar-sub-header"><a href="/xiaoyu_blog/Language/Node/Node/#总结" class="sidebar-link">总结</a></li></ul></li><li class="sidebar-sub-header"><a href="/xiaoyu_blog/Language/Node/Node/#node中require加载第三方包的规则" class="sidebar-link">Node中require加载第三方包的规则...</a></li><li class="sidebar-sub-header"><a href="/xiaoyu_blog/Language/Node/Node/#npm常见命令" class="sidebar-link">npm常见命令</a></li><li class="sidebar-sub-header"><a href="/xiaoyu_blog/Language/Node/Node/#buffer" class="sidebar-link">buffer</a></li><li class="sidebar-sub-header"><a href="/xiaoyu_blog/Language/Node/Node/#fs模块" class="sidebar-link">fs模块</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/xiaoyu_blog/Language/Node/Node/#_1-读文件" class="sidebar-link">1.读文件</a></li><li class="sidebar-sub-header"><a href="/xiaoyu_blog/Language/Node/Node/#_2-写文件" class="sidebar-link">2.写文件</a></li><li class="sidebar-sub-header"><a href="/xiaoyu_blog/Language/Node/Node/#_3-删除文件" class="sidebar-link">3.删除文件</a></li><li class="sidebar-sub-header"><a href="/xiaoyu_blog/Language/Node/Node/#_4-读取目录" class="sidebar-link">4.读取目录</a></li><li class="sidebar-sub-header"><a href="/xiaoyu_blog/Language/Node/Node/#_5-创建目录" class="sidebar-link">5.创建目录</a></li><li class="sidebar-sub-header"><a href="/xiaoyu_blog/Language/Node/Node/#_6-删除目录" class="sidebar-link">6.删除目录</a></li><li class="sidebar-sub-header"><a href="/xiaoyu_blog/Language/Node/Node/#_7-输入输出" class="sidebar-link">7.输入输出</a></li></ul></li><li class="sidebar-sub-header"><a href="/xiaoyu_blog/Language/Node/Node/#node-js-stream-流" class="sidebar-link">Node.js Stream(流)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/xiaoyu_blog/Language/Node/Node/#写入流" class="sidebar-link">写入流</a></li><li class="sidebar-sub-header"><a href="/xiaoyu_blog/Language/Node/Node/#从流中读取数据" class="sidebar-link">从流中读取数据</a></li><li class="sidebar-sub-header"><a href="/xiaoyu_blog/Language/Node/Node/#管道流" class="sidebar-link">管道流</a></li></ul></li><li class="sidebar-sub-header"><a href="/xiaoyu_blog/Language/Node/Node/#path模块-os模块" class="sidebar-link">path模块+os模块</a></li><li class="sidebar-sub-header"><a href="/xiaoyu_blog/Language/Node/Node/#url模块" class="sidebar-link">URL模块</a></li><li class="sidebar-sub-header"><a href="/xiaoyu_blog/Language/Node/Node/#http模块" class="sidebar-link">http模块</a></li><li class="sidebar-sub-header"><a href="/xiaoyu_blog/Language/Node/Node/#总结-2" class="sidebar-link">总结</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/xiaoyu_blog/Language/Node/Node/#事件驱动" class="sidebar-link">事件驱动</a></li><li class="sidebar-sub-header"><a href="/xiaoyu_blog/Language/Node/Node/#读写事件" class="sidebar-link">读写事件</a></li></ul></li></ul></li><li><a href="/xiaoyu_blog/Language/Node/MongoDB/" class="sidebar-link">MongoDB</a></li><li><a href="/xiaoyu_blog/Language/Node/Reptiles%E7%88%AC%E8%99%AB/" class="sidebar-link">Reptiles爬虫</a></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>JavaScript</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Guide </span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="node"><a href="#node" class="header-anchor">#</a> Node</h1> <h2 id="node-js简介"><a href="#node-js简介" class="header-anchor">#</a> Node.js简介</h2> <h3 id="_1-node-js是什么"><a href="#_1-node-js是什么" class="header-anchor">#</a> 1.Node.js是什么</h3> <p>Node.js诞生于2009年，有Joyent的员工Ryan Dahl开发而成，目前官网最新版本已经更新到17.7.0版本，最新最稳定的是10.15.3。Node.js不是一门语言也不是框架，他只是具有GoogleV8引擎的JavaScript运行时环境，同时结合Libuv扩展了JavaScript功能，使之支持io、fs等只有语言才有的特性，使得JavaScript能够同时具体DOM操作（浏览器）和I/O、文件读写、操作数据库（服务端）等能力，是目前最简单的全栈语言。</p> <p>这里我们可以简单理解Node.js是一个内置有chrome V8引擎的JavaScript运行环境，他可以使原本在浏览器中运行的JavaScript有能力跑后端，从而操作我们的数据库，进行文件读写等。</p> <p>目前市场上高密的I/O模型，比如Web开发，微服务，前端构建等都有做Node.js的身影。不少大型网站都是使用Node.js作为后台开发语言，比如淘宝 双十一、去哪儿网的PC端核心业务。另外我们一些前端工具譬如VSCode，Webpack等也是有Node.js开发。</p> <p>Node.js的包管理工具，npm已经成为世界开源包管理中最大的生态，功能强大，目前单月使用者接近1000万。</p> <h3 id="_2-node-js特性（记住三句话）"><a href="#_2-node-js特性（记住三句话）" class="header-anchor">#</a> 2.Node.js特性（记住三句话）</h3> <ul><li>事件驱动</li> <li>非阻塞IO模型（异步）</li> <li>轻量和高效</li></ul> <h2 id="node在一线企业中的运用"><a href="#node在一线企业中的运用" class="header-anchor">#</a> Node在一线企业中的运用</h2> <h3 id="作为中间层"><a href="#作为中间层" class="header-anchor">#</a> 作为中间层</h3> <p>我们通常说的前端和后端，前端负责用户界面，而后端负责提供数据和业务接口。现在我们在两者之间加入一层，前端并不是直接去请求后端业务接口，而是请求到中间层。再由中间层去请求业务接口，看一下示意图：</p> <p><img src="D:%5C%E6%96%87%E6%A1%A3%E5%AD%98%E6%94%BE%E5%8C%BA%5CStorage-of-record-documents%5CNode%5Cimages%5C%E4%B8%AD%E9%97%B4%E5%B1%82.png" alt=""></p> <blockquote><p>整个流程可以描述为：客户端直接请求到中间层的Node服务，Node服务分析请求，看需要哪个页面，再去请求对应数据，拿到数据后和模板结合成用户看到的页面，再给客户端。</p></blockquote> <p>那么有的人可能会觉得，这种模式不是更麻烦了吗？其实不然，我们来看看 <strong>中间层的优点：</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>	<span class="token number">1.</span>减轻客户端内存，项目用户体验好。不会像<span class="token constant">MVVM</span>模式的项目把页面渲染和数据请求都压在		  客户端，而是在服务端完成。

​	<span class="token number">2.</span><span class="token constant">SEO</span>性好，不像<span class="token constant">MVVM</span>模式页面由js生成，而是在服务端渲染好html字符，有利于网页被搜		  索到。

​	<span class="token number">3.</span>保持了前后端分离的优点和目的，即解放后端，后端可以继续以接口形式写业务代码。

​	<span class="token number">4.</span>前端可以操控的范围增多，甚至可以做服务器，数据库层面的优化，比如中间层中常常用		  nginx，dedis来优化项目，应对高并发。
</code></pre></div><p>中间层模式是一种开发模式上的进步，为什么这么好的模式我从来没有听说过呢？因为这种模式成本过高，如果没有一定量级的项目没必要去采用。</p> <h3 id="做项目构建工具"><a href="#做项目构建工具" class="header-anchor">#</a> 做项目构建工具</h3> <p>这里说的项目构建工具，我相信大家都用过，我们的webpack，vue-cli都是输入项目构建工作。那么大家觉得这一类工具神奇好用方便的同时，有没有想过这些工具拿什么语言写的？其实他们不难，这些工具都是用Node来写的</p> <p>很多公司都会开发自己公司的项目构建工具，帮助公司项目做的更标准更方便，一个好的项目构建工具，会极大的加快整个公司的项目开发效率。</p> <p>这一类的项目构工具一般都要很多文件操作，Node对于i/o流的操作，在目前的主流后端语言中数一数二。所以越来越多的公司选择用Node来做项目构建工具。</p> <h3 id="做一些小型网站后端"><a href="#做一些小型网站后端" class="header-anchor">#</a> 做一些小型网站后端</h3> <p>用Node做后端，可能极大多数人认为的Node作用。其实真正在企业之中，很少会让你去用Node做后端。所以一般来说都是做一些小型或者个人站的后端</p> <h2 id="node-js事件"><a href="#node-js事件" class="header-anchor">#</a> Node.js事件</h2> <h3 id="node-js事件循环"><a href="#node-js事件循环" class="header-anchor">#</a> Node.js事件循环</h3> <p>Node.js是单进程单线程应用程序，但是因为V8引擎提供的异步执行回调接口，通过这些接口可以处理大量并发，所以性能非常高。</p> <p>Node.js几乎每一个API都是支持回调函数的。</p> <p>Node.js基本上所有的事件机制都是用设计模式中观察者模式实现。</p> <p>Node.js单线程类似进入一个while(true)的世界循环，直到没有事件观察者退出，每个异步事件都生成一个事件观察者，如果有事件发生就调用该回调函数。</p> <div class="language-js extra-class"><pre class="language-js"><code>开启进程
开启线程
初始化数据，window<span class="token operator">/</span>document<span class="token operator">/</span>loaction<span class="token operator">...</span>
<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    
    初始化事件列表
    根据事件修改数据
    根据数据去渲染页面
   
    <span class="token keyword">if</span><span class="token punctuation">(</span>count <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        运行js代码
        btn<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        	document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>style<span class="token punctuation">.</span>background <span class="token operator">=</span> <span class="token string">'skyblue'</span>
        	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span>
    	<span class="token punctuation">}</span>
    		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">456</span><span class="token punctuation">)</span>
        	count<span class="token operator">++</span>
    <span class="token punctuation">}</span>
    
<span class="token punctuation">}</span>
</code></pre></div><p><strong>事件机制原理：</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span>

fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">'hello.txt'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> flag<span class="token operator">:</span> <span class="token string">'r'</span><span class="token punctuation">,</span> encoding<span class="token operator">:</span> <span class="token string">'utf-8'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    yuEvent<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'helloSuccess'</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span>
    <span class="token comment">// 1数据库查看所有用户详细信息</span>
    <span class="token comment">// 2统计用户年龄比例</span>
    <span class="token comment">// 3查看所有用户学校的详细信息</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">let</span> yuEvent <span class="token operator">=</span> <span class="token punctuation">{</span>
  event<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// helloSuccess: [fn,fn,fn]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">on</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">eventName<span class="token punctuation">,</span> eventFn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>event<span class="token punctuation">[</span>eventName<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>event<span class="token punctuation">[</span>eventName<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>eventFn<span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>event<span class="token punctuation">[</span>eventName<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>event<span class="token punctuation">[</span>eventName<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>eventFn<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">emit</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">eventName<span class="token punctuation">,</span> EventMsg</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>event<span class="token punctuation">[</span>eventName<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>event<span class="token punctuation">[</span>eventName<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">itemFn</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">itemFn</span><span class="token punctuation">(</span>EventMsg<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

yuEvent<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'helloSuccess'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">EventMsg</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'1数据库查看所有用户详细信息'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
yuEvent<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'helloSuccess'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">EventMsg</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'2统计用户年龄比例'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
yuEvent<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'helloSuccess'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">EventMsg</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'3查看所有用户学校的详细信息'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// PS D:\exces\PracticeCode\Node相关\事件&gt; node read.js</span>
<span class="token comment">// 运行结果：</span>
<span class="token comment">// username,age,sex,school</span>
<span class="token comment">// 1数据库查看所有用户详细信息</span>
<span class="token comment">// 2统计用户年龄比例</span>
<span class="token comment">// 3查看所有用户学校的详细信息</span>
</code></pre></div><p><strong>Node内置的event模块进行调用</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> events <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'events'</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> ee <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">events<span class="token punctuation">.</span>EventEmitter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

ee<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'helloSuccess'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'学Node'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
ee<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'helloSuccess'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'学webpack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
ee<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'helloSuccess'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'学React'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">function</span> <span class="token function">xyReadFile</span><span class="token punctuation">(</span><span class="token parameter">path</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> <span class="token punctuation">{</span> flag<span class="token operator">:</span> <span class="token string">'r'</span><span class="token punctuation">,</span> encoding<span class="token operator">:</span> <span class="token string">'utf-8'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token function">resolve</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">xyReadFile</span><span class="token punctuation">(</span><span class="token string">'hello.txt'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  ee<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'helloSuccess'</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// 第二种写法</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">xyReadFile</span><span class="token punctuation">(</span><span class="token string">'hello.txt'</span><span class="token punctuation">)</span>
  ee<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'helloSuccess'</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// PS D:\exces\PracticeCode\Node相关\事件&gt; node event.js</span>
<span class="token comment">// 学Node</span>
<span class="token comment">// 窗前明月光</span>
<span class="token comment">// 学webpack</span>
<span class="token comment">// 学React</span>
</code></pre></div><h2 id="node-js模块化理解"><a href="#node-js模块化理解" class="header-anchor">#</a> Node.js模块化理解</h2> <p>Node.js采用的是Commonjs规范，在NodeJs中，一般将代码合理拆分到不同的js文件中，每一个文件就是一个模块，而文件路径就是模块名。</p> <p>在编写每个模块时，都有require、exports、module三个预先定义好的变量可供使用。</p> <blockquote><p>Node.js中模块的分类</p></blockquote> <ul><li>核心模块（已经封装好的内置模块）；</li> <li>自己定义的模块；</li> <li>第三方的模块（npm下载下来的）</li></ul> <h3 id="_1-require"><a href="#_1-require" class="header-anchor">#</a> 1.require</h3> <p><code>require</code>函数用来在一个模块中引入另一个模块：用法：<code>let cc = require('模块名')</code>。模块名可用相对路径或绝对路径</p> <p>require()函数的两个作用</p> <ul><li>执行导入的模块中的代码；</li> <li>返回导入模块中的接口对象；</li></ul> <h3 id="_2-exports"><a href="#_2-exports" class="header-anchor">#</a> 2.exports</h3> <p><code>exports</code>对象用来导出当前模块的公共方法或属性，别的模块通过<code>require</code>函数使用当前模块得到的就是当前模块的<code>exports</code>对象。用法：<code>exports.name</code>,name为导出对象的名字。</p> <blockquote><p>其实exports类似于ES6中的export的用法，用来导出一个指定名字的对象</p></blockquote> <h3 id="_3-module-exports"><a href="#_3-module-exports" class="header-anchor">#</a> 3.module.exports</h3> <p><code>module.exports</code>用来导出一个默认对象，没有指定对象名，常见于修改模块的原始导出对象。比如原本模块导出的是一个对象，我们可以通过module.exports修改为导出一个函数。</p> <blockquote><p>注意使用exports时，只能单个设置属性exports.a =</p> <p>使用module.exports可以单个设置属性，也可以整个赋值</p></blockquote> <h3 id="_4-模块初始化"><a href="#_4-模块初始化" class="header-anchor">#</a> 4.模块初始化</h3> <p>一个模块中的JS代码仅在模块<strong>第一次被使用时</strong>执行一次，并且在使用的过程中进行初始化，之后缓存起来便于后续继续使用。</p> <h3 id="_5-主模块"><a href="#_5-主模块" class="header-anchor">#</a> 5.主模块</h3> <p>通过命令形参传递传递个NodeJS以启动程序的模块被称为主模块。主模块负责调度组成整个程序的其他模块完成工作。例如通过以下命令启动程序时，main.js就是主模块。</p> <div class="language-js extra-class"><pre class="language-js"><code>$ node main<span class="token punctuation">.</span>js <span class="token comment">// 运行main.js启动程序，main.js称为主模块</span>
</code></pre></div><h3 id="总结"><a href="#总结" class="header-anchor">#</a> 总结</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token number">1.</span>Node中每个模块都有一个module对象。module对象中有一个exports属性为接	口的对象，我们需要把模块之间公共的方法或属性挂载在这个接口对象中，方	便	其他的模块使用这些公共的方法或属性。

<span class="token number">2.</span>Node中每个模块的最后，都会<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">retrun: module.exports</span><span class="token template-punctuation string">`</span></span>。

<span class="token number">3.</span>Node中每个模块都会把<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">module.exports</span><span class="token template-punctuation string">`</span></span>指向的对象赋值给变量exports<span class="token punctuation">,</span>也就是	说：exports <span class="token operator">=</span> module<span class="token punctuation">.</span>exports。

<span class="token number">4.</span>如果需要导出多个成员时必须使用<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">exports.add = XXX; exports.foo = XXX</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span> 或者使用<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">module.exports.add = XXX;module.exports.foo = XXX</span><span class="token template-punctuation string">`</span></span>。
</code></pre></div><h2 id="node中require加载第三方包的规则"><a href="#node中require加载第三方包的规则" class="header-anchor">#</a> Node中require加载第三方包的规则...</h2> <p>Node.js中使用CommonJs模块化机制，通过npm下载的第三方包，我们在项目中引入第三方包都是：<code>let xx = require('第三方包名')</code> ，而<code>require</code>方法加载第三方包的原理机制是什么？</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token number">1.</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">require('第三方包名')</span><span class="token template-punctuation string">`</span></span>优先在加载该包的模块的同级目录<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">node_modules</span><span class="token template-punctuation string">`</span></span>中查找第三方包。

<span class="token number">2.</span> 找到该第三方包中的<span class="token keyword">package</span><span class="token punctuation">.</span>json文件，并且找到里面的main属性对应的入口模块，该入口模块即为加载的第三方模块。

<span class="token number">3.</span> 如果在要加载的第三方包中没有找到<span class="token keyword">package</span><span class="token punctuation">.</span>json文件或者是<span class="token keyword">package</span><span class="token punctuation">.</span>json文件中没有main属性则默认加载第三方包中的index<span class="token punctuation">.</span>js文件

<span class="token number">4.</span> 如果在加载第三方模块的文件的同级目录没有找到<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">node_module</span><span class="token template-punctuation string">`</span></span>文件夹，或者以上所有情况都没找到，则会向上一级父级目录下查找<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">node_module</span><span class="token template-punctuation string">`</span></span>文件夹，查找规则如上一致。

<span class="token number">5.</span> 如果一直找到该模块的磁盘根路径都没有找到，则会报错：<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">can not find module xxx</span><span class="token template-punctuation string">`</span></span>。
</code></pre></div><h2 id="npm常见命令"><a href="#npm常见命令" class="header-anchor">#</a> npm常见命令</h2> <p>npm英文全称：<code>node package manager</code>，常见的npm命令总结如下：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">npm -v</span><span class="token template-punctuation string">`</span></span><span class="token operator">:</span> 查看npm版本。

<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">npm init</span><span class="token template-punctuation string">`</span></span><span class="token operator">:</span> 初始化后会出现一个<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">package.json</span><span class="token template-punctuation string">`</span></span>配置文件。可以在后面加上<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">-y</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>快速跳过问答式界面。

<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">npm install</span><span class="token template-punctuation string">`</span></span><span class="token operator">:</span> 会根据项目中的<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">package.json</span><span class="token template-punctuation string">`</span></span>文件自动下载项目所需要的全部依赖。

<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">npm install 包名 --save-dev(npm install 包名 -D)</span><span class="token template-punctuation string">`</span></span><span class="token operator">:</span> 安装的包只用于开发环境，不用于生产环境，会出现在<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">package.json</span><span class="token template-punctuation string">`</span></span>文件中的<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">devDependencies</span><span class="token template-punctuation string">`</span></span>属性中。

<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">npm install 包名 --save(npm install 包名 -S)</span><span class="token template-punctuation string">`</span></span><span class="token operator">:</span> 安装的包需要发布到生产环境，会出现在<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">package.json</span><span class="token template-punctuation string">`</span></span>文件中的<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">dependencies</span><span class="token template-punctuation string">`</span></span>属性中。

<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">npm list</span><span class="token template-punctuation string">`</span></span><span class="token operator">:</span> 查看当前目录下已安装的node包。

<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">npm list -g</span><span class="token template-punctuation string">`</span></span><span class="token operator">:</span> 查看全局已经安装过的node包。

<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">npm --help</span><span class="token template-punctuation string">`</span></span><span class="token operator">:</span> 查看npm帮助命令。

<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">npm update 包名</span><span class="token template-punctuation string">`</span></span><span class="token operator">:</span> 更新指定包。

<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">npm uninstall 包名</span><span class="token template-punctuation string">`</span></span><span class="token operator">:</span> 卸载指定包。

<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">npm config list</span><span class="token template-punctuation string">`</span></span><span class="token operator">:</span> 查看配置信息。

<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">npm 指定命令 --help</span><span class="token template-punctuation string">`</span></span><span class="token operator">:</span> 查看指定命令的帮助。

<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">npm info 指定包名</span><span class="token template-punctuation string">`</span></span><span class="token operator">:</span> 查看远程npm上指定包的所有版本信息。

<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">npm install -g cnpm --registry=https://registry.npm.taobao.org</span><span class="token template-punctuation string">`</span></span><span class="token operator">:</span> 修改包下载源，此例修改为了淘宝镜像。

<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">npm root</span><span class="token template-punctuation string">`</span></span><span class="token operator">:</span> 查看当前包的安装路径。

<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">npm root -g</span><span class="token template-punctuation string">`</span></span><span class="token operator">:</span> 查看全局的包的安装路径。

<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">npm ls 包名</span><span class="token template-punctuation string">`</span></span><span class="token operator">:</span> 查看本地安装的指定包及版本信息，没有显示empty。

<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">npm ls 包名 -g</span><span class="token template-punctuation string">`</span></span><span class="token operator">:</span> 查看全局安装的指定包及版本信息，没有显示empty。
</code></pre></div><h2 id="buffer"><a href="#buffer" class="header-anchor">#</a> buffer</h2> <blockquote><p>1.数组不能进行二进制数据的操作</p> <p>2.js数组不像java、payth等语言效率高</p> <p>3.buffer内存空间开辟出固定大小的内存</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 将字符串转成buffer对象</span>
<span class="token keyword">var</span> str <span class="token operator">=</span> <span class="token string">'helloworld'</span>
<span class="token keyword">let</span> buf <span class="token operator">=</span> Buffer<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span>

<span class="token comment">// 输出buffer内容</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>buf<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 开辟一个空的buffer(缓存区)，安全但是比下面慢</span>
<span class="token keyword">let</span> buf1 <span class="token operator">=</span> Buffer<span class="token punctuation">.</span><span class="token function">alloc</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
buf1<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">256</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>buf1<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 不安全，会有上次内存数据遗留</span>
<span class="token keyword">let</span> buf2 <span class="token operator">=</span> Buffer<span class="token punctuation">.</span><span class="token function">allocUnsafe</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>buf2<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="fs模块"><a href="#fs模块" class="header-anchor">#</a> fs模块</h2> <h3 id="_1-读文件"><a href="#_1-读文件" class="header-anchor">#</a> 1.读文件</h3> <p><strong>语法</strong>：</p> <div class="language-js extra-class"><pre class="language-js"><code>fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span>path<span class="token punctuation">[</span><span class="token punctuation">,</span> options<span class="token punctuation">]</span><span class="token punctuation">,</span> callback<span class="token punctuation">)</span>
</code></pre></div><blockquote><p>接收三个参数，写入文件路径，操作和编码格式等，回调函数</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span> 

<span class="token comment">// 同步，等待和堵塞</span>
<span class="token keyword">var</span> content <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span><span class="token string">'hello.txt'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> flag<span class="token operator">:</span> <span class="token string">'r'</span><span class="token punctuation">,</span> encoding<span class="token operator">:</span> <span class="token string">&quot;utf-8&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 异步</span>
fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">'hello.txt'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> flag<span class="token operator">:</span> <span class="token string">'r'</span><span class="token punctuation">,</span> encoding<span class="token operator">:</span> <span class="token string">&quot;utf-8&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
   <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
     console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
     console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
 <span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 一般都用Promise对读取文件进行封装</span>
<span class="token keyword">function</span> <span class="token function">fsRead</span><span class="token punctuation">(</span><span class="token parameter">path</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> <span class="token punctuation">{</span> flag<span class="token operator">:</span> <span class="token string">'r'</span><span class="token punctuation">,</span> encoding<span class="token operator">:</span> <span class="token string">&quot;utf-8&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 失败执行的内容</span>
        <span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token comment">// console.log(data);</span>
        <span class="token function">resolve</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// 配合async顺序调用</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">ReadList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> file2 <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fsRead</span><span class="token punctuation">(</span><span class="token string">'hello.txt'</span><span class="token punctuation">)</span>
  <span class="token keyword">var</span> file3 <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fsRead</span><span class="token punctuation">(</span>file2<span class="token operator">+</span> <span class="token string">'.txt'</span><span class="token punctuation">)</span>
  <span class="token keyword">var</span> file3Content <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fsRead</span><span class="token punctuation">(</span>file3<span class="token operator">+</span> <span class="token string">'.txt'</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>file3Content<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">ReadList</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="_2-写文件"><a href="#_2-写文件" class="header-anchor">#</a> 2.写文件</h3> <p><strong>语法</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>fs<span class="token punctuation">.</span><span class="token function">writeFile</span><span class="token punctuation">(</span>file<span class="token punctuation">,</span> data<span class="token punctuation">[</span><span class="token punctuation">,</span> options<span class="token punctuation">]</span><span class="token punctuation">,</span> callback<span class="token punctuation">)</span>
</code></pre></div><blockquote><p>wirteFile接受三个参数，写入文件路径，写入内容，回调函数。</p> <p>写入成功时候：error为null；写入失败时候：error为错误对象</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// flag</span>
<span class="token comment">// write=&gt;w   read=&gt;r   apped=&gt;a</span>
<span class="token comment">// 'w': 打开文件用于写入。 如果文件不存在则创建文件，如果文件存在则截断文件。</span>
<span class="token comment">// 'a': 打开文件用于追加。 如果文件不存在，则创建该文件。</span>

fs<span class="token punctuation">.</span><span class="token function">writeFile</span><span class="token punctuation">(</span><span class="token string">'test.txt'</span><span class="token punctuation">,</span><span class="token string">&quot;今晚吃啥？\n&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>flag<span class="token operator">:</span> <span class="token string">'a'</span><span class="token punctuation">,</span>encoding<span class="token operator">:</span><span class="token string">&quot;utf-8&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span><span class="token string">'写入内容出错'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'写入内容成功'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>


<span class="token comment">// Promise封装写入文件</span>
<span class="token keyword">function</span> <span class="token function">writefs</span><span class="token punctuation">(</span><span class="token parameter">path<span class="token punctuation">,</span>content</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span>reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    fs<span class="token punctuation">.</span><span class="token function">writeFile</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>content<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">\n</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token punctuation">{</span>flag<span class="token operator">:</span> <span class="token string">'a'</span><span class="token punctuation">,</span>encoding<span class="token operator">:</span><span class="token string">&quot;utf-8&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token function">resolve</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">writeList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> <span class="token function">writefs</span><span class="token punctuation">(</span><span class="token string">'xy.html'</span><span class="token punctuation">,</span> <span class="token string">'&lt;h1&gt;1今天学Node&lt;/h1&gt;'</span><span class="token punctuation">)</span>
  <span class="token keyword">await</span> <span class="token function">writefs</span><span class="token punctuation">(</span><span class="token string">'xy.html'</span><span class="token punctuation">,</span> <span class="token string">'&lt;h1&gt;2明天学Node&lt;/h1&gt;'</span><span class="token punctuation">)</span>
  <span class="token keyword">await</span> <span class="token function">writefs</span><span class="token punctuation">(</span><span class="token string">'xy.html'</span><span class="token punctuation">,</span> <span class="token string">'&lt;h1&gt;3后天学Node&lt;/h1&gt;'</span><span class="token punctuation">)</span>
  <span class="token keyword">await</span> <span class="token function">writefs</span><span class="token punctuation">(</span><span class="token string">'xy.html'</span><span class="token punctuation">,</span> <span class="token string">'&lt;h1&gt;4大后天学Node&lt;/h1&gt;'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">writeList</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="_3-删除文件"><a href="#_3-删除文件" class="header-anchor">#</a> 3.删除文件</h3> <p><strong>语法</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>fs<span class="token punctuation">.</span><span class="token function">unlink</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> callback<span class="token punctuation">)</span>
</code></pre></div><blockquote><p>删除文件回收站没有，基本不可恢复</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span>
fs<span class="token punctuation">.</span><span class="token function">unlink</span><span class="token punctuation">(</span><span class="token string">'xy.txt'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'成功删除'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="_4-读取目录"><a href="#_4-读取目录" class="header-anchor">#</a> 4.读取目录</h3> <p><strong>语法</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>fs<span class="token punctuation">.</span><span class="token function">readdir</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> callback<span class="token punctuation">)</span>
</code></pre></div><blockquote><p>callback有两个参数，error：为错误信息；files：为目录下的文件数组列表</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> <span class="token punctuation">{</span> fsWritefs<span class="token punctuation">,</span> fsRead <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./lcfs'</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> txtPath <span class="token operator">=</span> <span class="token string">&quot;all.txt&quot;</span>
fs<span class="token punctuation">.</span><span class="token function">readdir</span><span class="token punctuation">(</span><span class="token string">'../fs'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> files</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>files<span class="token punctuation">)</span><span class="token punctuation">;</span>
    files<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">filename<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> content <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fsRead</span><span class="token punctuation">(</span><span class="token string">'../fs/'</span> <span class="token operator">+</span> filename<span class="token punctuation">)</span>
      <span class="token keyword">await</span> <span class="token function">fsWritefs</span><span class="token punctuation">(</span>txtPath<span class="token punctuation">,</span> content<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="_5-创建目录"><a href="#_5-创建目录" class="header-anchor">#</a> 5.创建目录</h3> <p><strong>语法</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>fs<span class="token punctuation">.</span><span class="token function">mkdir</span><span class="token punctuation">(</span>path<span class="token punctuation">[</span><span class="token punctuation">,</span>option<span class="token punctuation">]</span><span class="token punctuation">,</span> callback<span class="token punctuation">)</span>
</code></pre></div><h3 id="_6-删除目录"><a href="#_6-删除目录" class="header-anchor">#</a> 6.删除目录</h3> <p><strong>语法</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>fs<span class="token punctuation">.</span><span class="token function">rmdir</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span> callback<span class="token punctuation">)</span>
</code></pre></div><blockquote><p>回收站无法找回</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span>

fs<span class="token punctuation">.</span><span class="token function">rmdir</span><span class="token punctuation">(</span><span class="token string">'abc'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'删除成功'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="_7-输入输出"><a href="#_7-输入输出" class="header-anchor">#</a> 7.输入输出</h3> <blockquote><p>该<code>readline</code>模块提供了一个接口，用于一次从一行的<a href="https://nodejs.org/api/stream.html#stream_readable_streams" target="_blank" rel="noopener noreferrer">Readable<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 流（例如<a href="https://nodejs.org/api/process.html#process_process_stdin" target="_blank" rel="noopener noreferrer"><code>process.stdin</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>）中读取数据。</p> <p>一旦调用了此代码，Node.js应用程序将<code>readline.Interface</code>在接口关闭之前终止， 因为接口等待<code>input</code>流上接收到数据。</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> readline <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'readline'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 导入readline包</span>

<span class="token comment">// 实例化接口对象</span>
<span class="token keyword">let</span> r1 <span class="token operator">=</span> readline<span class="token punctuation">.</span><span class="token function">createInterface</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  input<span class="token operator">:</span> process<span class="token punctuation">.</span>stdin<span class="token punctuation">,</span>
  output<span class="token operator">:</span> process<span class="token punctuation">.</span>stdout
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">//设置r1,提问事件</span>
r1<span class="token punctuation">.</span><span class="token function">question</span><span class="token punctuation">(</span><span class="token string">&quot;今天学什么？&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">answer</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'答复：'</span><span class="token punctuation">,</span> answer<span class="token punctuation">)</span><span class="token punctuation">;</span>
  r1<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
r1<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'close'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  process<span class="token punctuation">.</span><span class="token function">exit</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="node-js-stream-流"><a href="#node-js-stream-流" class="header-anchor">#</a> Node.js Stream(流)</h2> <p>Stream是一个抽象接口，Node中有很多对象实现了这个接口。例如，对http服务器发起请求的request对象就是一个Stream，还有stdout(标准输出)。</p> <p>Node.js，Stream有四种流类型：</p> <ul><li><strong>Readable</strong>	-	可读操作。</li> <li><strong>Writable</strong>     -    可写操作。</li> <li><strong>Duplex</strong>        -    可读可写操作。</li> <li><strong>Transform</strong>   -   操作被写入数据，然后读出结果。</li></ul> <p>所有的Stream对象都是EventEmitter的实例。常用的事件有：</p> <ul><li><strong>data</strong>     - 当有数据可读时触发。</li> <li><strong>end</strong>      - 没有更多的数据可读时触发。</li> <li><strong>error</strong>    - 在接收和写入过程中发生错误时触发。</li> <li><strong>finish</strong>   - 所有数据已被写入到底层系统时触发。</li></ul> <h3 id="写入流"><a href="#写入流" class="header-anchor">#</a> 写入流</h3> <p><strong>语法</strong>：</p> <div class="language-js extra-class"><pre class="language-js"><code>fs<span class="token punctuation">.</span><span class="token function">createWriteStream</span><span class="token punctuation">(</span>文件路径，<span class="token punctuation">[</span>可选的配置操作<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><p>例子：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span>
<span class="token comment">// 创建写入流</span>
<span class="token keyword">let</span> ws <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">createWriteStream</span><span class="token punctuation">(</span><span class="token string">'hello.txt'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> flags<span class="token operator">:</span> <span class="token string">'w'</span><span class="token punctuation">,</span> encoding<span class="token operator">:</span> <span class="token string">'utf-8'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ws<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 监听文件打开事件 </span>
ws<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'open'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;文件打开了&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// 监听准备事件</span>
ws<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'ready'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;文件写入已准备状态&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// 监听文件关闭事件</span>
ws<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'close'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'文件写入完成关闭'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// 文件流式写入</span>
ws<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&quot;helloworld!&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;内容流入完成&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// 文件写入完成 </span>
ws<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;文件写入关闭&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>​</p> <h3 id="从流中读取数据"><a href="#从流中读取数据" class="header-anchor">#</a> 从流中读取数据</h3> <p><strong>语法：</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>fs<span class="token punctuation">.</span><span class="token function">createReadStream</span><span class="token punctuation">(</span>路径<span class="token punctuation">,</span><span class="token punctuation">[</span>可选的配置项<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 语法：fs.createReadStream(路径,[可选的配置项])</span>
<span class="token keyword">let</span> rs <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">createReadStream</span><span class="token punctuation">(</span><span class="token string">'hello.txt'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> flags<span class="token operator">:</span> <span class="token string">'r'</span><span class="token punctuation">,</span> encoding<span class="token operator">:</span> <span class="token string">'utf-8'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>rs<span class="token punctuation">)</span><span class="token punctuation">;</span>

rs<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'open'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'读取的文件打开'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

rs<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'close'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'读取流结束'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 每一次数据流入完成</span>
rs<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'data'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">chunk</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>chunk<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="管道流"><a href="#管道流" class="header-anchor">#</a> 管道流</h3> <blockquote><p>在<code>'pipe'</code>当事件被发射<a href="https://nodejs.org/api/stream.html#stream_readable_pipe_destination_options" target="_blank" rel="noopener noreferrer"><code>stream.pipe()</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>方法被称为上的可读流，添加该可写至其目的地集合。</p></blockquote> <h2 id="path模块-os模块"><a href="#path模块-os模块" class="header-anchor">#</a> path模块+os模块</h2> <p>Node.js中<code>path</code>模块提供了一些路径操作的API，<code>os</code>模块提供了一些操作系统相关信息的API</p> <h4 id="_1-path"><a href="#_1-path" class="header-anchor">#</a> 1.path</h4> <p><code>path.extname('hello.md')</code>获取文件（可以是一个路径文件）的扩展名，演示如下:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">extname</span><span class="token punctuation">(</span><span class="token string">'http://www.xinhuanet.com//2019-11/23/c_1125266028.html'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// .html</span>
</code></pre></div><ul><li><code>path.resolve([...path])</code>把路径或路径片段的序列解析为一个绝对路径。</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'/sxt'</span><span class="token punctuation">,</span><span class="token string">'qianduan'</span><span class="token punctuation">,</span> <span class="token string">'zhongji'</span><span class="token punctuation">]</span>
<span class="token keyword">let</span> info1 <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token operator">...</span>arr<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>info1<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// D:\sxt\qianduan\zhongji</span>
</code></pre></div><ul><li><code>path.join([...paths])</code>方法使用平台特定的分隔符把全部定的<code>path</code>片段连接到一起，并规范化的路径。</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'/sxt'</span><span class="token punctuation">,</span><span class="token string">'qianduan'</span><span class="token punctuation">,</span> <span class="token string">'zhongji'</span><span class="token punctuation">]</span>
<span class="token keyword">let</span> info1 <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token operator">...</span>arr<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>info1<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// D:\sxt\qianduan\zhongji</span>
</code></pre></div><ul><li><code>path.parse([...paths])</code>解析路径，可以将路径信息直接解析出来，解析出根路径，目录，扩展名，文件名称，文件名</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>__filename<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//	{ root: 'D:\\',</span>
<span class="token comment">//  	dir: 'D:\\exces\\PracticeCode\\Node相关\\PATH',</span>
<span class="token comment">//		base: 'nodePath2.js',</span>
<span class="token comment">//		ext: '.js',</span>
<span class="token comment">//  	name: 'nodePath2' </span>
<span class="token comment">//	}</span>
</code></pre></div><p><strong>几个路径的含义：</strong></p> <blockquote><p><code>__dirname</code>：获取当前执行文件所在<strong>目录</strong>的完整目录名</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 获得当前执行目录的完整路径</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// D:\exces\PracticeCode\Node相关\PATH</span>
<span class="token keyword">let</span> info2 <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span><span class="token string">'sxt'</span><span class="token punctuation">,</span><span class="token string">'qianduan'</span><span class="token punctuation">,</span> <span class="token string">'zhongji'</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>info2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// D:\exces\PracticeCode\Node相关\PATH\sxt\qianduan\zhongji</span>
</code></pre></div><blockquote><p><code>__filename</code>：获得当前执行<strong>文件</strong>的带有完整绝对路径的文件名</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 获取当前的执行文件</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>__filename<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// D:\exces\PracticeCode\Node相关\PATH\nodePath2.js</span>
</code></pre></div><blockquote><p><code>process.cwd()</code>：获得当前执行<strong>node命令</strong>时候的文件夹目录名</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span><span class="token function">cwd</span><span class="token punctuation">(</span>__filename<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//  D:\exces\PracticeCode\Node相关\PATH</span>
</code></pre></div><h4 id="_2-os"><a href="#_2-os" class="header-anchor">#</a> 2.os</h4> <ul><li><code>os.cpus()</code>获取操作系统的CPU信息。</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> os <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'os'</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>os<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><code>os.totalmem()</code> 获取整个内存大小</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> os <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'os'</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>os<span class="token punctuation">.</span><span class="token function">totalmem</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="url模块"><a href="#url模块" class="header-anchor">#</a> URL模块</h2> <p><code>url</code>核心模块在为我们解析url地址时提供了非常方便的API，常见包含有查询字符串的url地址解析。</p> <ol><li><code>url.parse()</code>：可以解析一个url地址，通过传入第二个参数（<code>true</code>）把包含有查询字符串的query转换成对象。</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> httpUrl <span class="token operator">=</span> <span class="token string">&quot;https://sale.vmall.com/hwmate.html?cid=10602&quot;</span>
<span class="token keyword">let</span> urlObj <span class="token operator">=</span> url<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>httpUrl<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>urlObj<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/*
Url {
  protocol: 'https:', // 协议
  slashes: true,
  auth: null,
  host: 'sale.vmall.com',
  port: null,
  hostname: 'sale.vmall.com',  // 主机名
  hash: null, // 哈希值
  search: '?cid=10602',
  query: 'cid=10602',
  pathname: '/hwmate.html',
  path: '/hwmate.html?cid=10602',
  href: 'https://sale.vmall.com/hwmate.html?cid=10602'
}
*/</span>
</code></pre></div><p>2.<code>url.resolve()</code>解析相当于基URL的目标URL。第一个参数：基URL，第二个参数：目标URL。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> targetUrl <span class="token operator">=</span> <span class="token string">&quot;http://www.taobao.com/&quot;</span>
httpUrl <span class="token operator">=</span> <span class="token string">&quot;./sxt/qianduan/laochen.html&quot;</span>

<span class="token keyword">let</span> newUrl <span class="token operator">=</span> url<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>targetUrl<span class="token punctuation">,</span>httpUrl<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newUrl<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// http://www.taobao.com/sxt/qianduan/laochen.html</span>
</code></pre></div><h2 id="http模块"><a href="#http模块" class="header-anchor">#</a> http模块</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'http'</span><span class="token punctuation">)</span>
<span class="token comment">// 创建server服务器对象</span>
<span class="token keyword">const</span> server <span class="token operator">=</span> http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 监听对当前服务器对象的请求</span>
server<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'request'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 当服务被请求时，会触发请求事件，并传入请求对象和响应对象</span>
  <span class="token comment">// console.log(req.url);</span>
  <span class="token comment">// console.log(req.headers);</span>
  res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'Content-Type'</span><span class="token punctuation">,</span><span class="token string">'text/html; charset=UTF-8'</span><span class="token punctuation">)</span>
  <span class="token comment">// 根据路径信息，显示不同的页面内容</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>url <span class="token operator">===</span> <span class="token string">'/'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">'首页'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">'国内新闻'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">'helloworld'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 服务器监听的端口</span>
server<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">80</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 启动监听端口号成功时触发</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;服务器启动成功&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="总结-2"><a href="#总结-2" class="header-anchor">#</a> 总结</h2> <p>Node: 一门后端语言（服务器的程序语言），能够连接数据库存取数据，能够接受和处理网络请求（服务器的响应，发送请求去获取数据），事件驱动，异步执行，不等待提高IO（input和ouput）的处理速度和效率。</p> <p>服务器：本质上是一台PC主机（linux系统，windows系统），部署了后端语言的执行环境，并且能够长时间提供网络服务。</p> <h3 id="事件驱动"><a href="#事件驱动" class="header-anchor">#</a> 事件驱动</h3> <p>node本身提供了事件对象，帮助我们快速订阅者模式，或者观察者模式，或者事件模式</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 事件的订阅</span>
event<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'林俊杰演唱会'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> 订阅门票 <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// 事件的触发</span>
event<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'林俊杰演唱会'</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="读写事件"><a href="#读写事件" class="header-anchor">#</a> 读写事件</h3> <div class="language-js extra-class"><pre class="language-js"><code>fs<span class="token punctuation">.</span><span class="token function">readfile</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">,</span>读取配置<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
fs<span class="token punctuation">.</span><span class="token function">writeFile</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">,</span>写入数据<span class="token punctuation">,</span>写入配置<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/xiaoyu_blog/Language/Node/MongoDB/">
        MongoDB
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/xiaoyu_blog/assets/js/app.46baccfe.js" defer></script><script src="/xiaoyu_blog/assets/js/2.0c3dc4c5.js" defer></script><script src="/xiaoyu_blog/assets/js/17.2ff004d5.js" defer></script>
  </body>
</html>
